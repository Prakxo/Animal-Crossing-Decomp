.include "macros.inc"

.section .text

.org 0x8008CE24

.global __ARQServiceQueueLo
__ARQServiceQueueLo:
/* 8008CE24 00089D84  7C 08 02 A6 */	mflr r0
/* 8008CE28 00089D88  90 01 00 04 */	stw r0, 4(r1)
/* 8008CE2C 00089D8C  94 21 FF F8 */	stwu r1, -8(r1)
/* 8008CE30 00089D90  80 0D 8F BC */	lwz r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CE34 00089D94  28 00 00 00 */	cmplwi r0, 0
/* 8008CE38 00089D98  40 82 00 1C */	bne lbl_8008CE54
/* 8008CE3C 00089D9C  80 6D 8F B0 */	lwz r3, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8008CE40 00089DA0  28 03 00 00 */	cmplwi r3, 0
/* 8008CE44 00089DA4  41 82 00 10 */	beq lbl_8008CE54
/* 8008CE48 00089DA8  90 6D 8F BC */	stw r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CE4C 00089DAC  80 03 00 00 */	lwz r0, 0(r3)
/* 8008CE50 00089DB0  90 0D 8F B0 */	stw r0, __ARQRequestQueueLo-_SDA_BASE_(r13)
lbl_8008CE54:
/* 8008CE54 00089DB4  80 AD 8F BC */	lwz r5, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CE58 00089DB8  28 05 00 00 */	cmplwi r5, 0
/* 8008CE5C 00089DBC  41 82 00 B8 */	beq lbl_8008CF14
/* 8008CE60 00089DC0  80 C5 00 18 */	lwz r6, 0x18(r5)
/* 8008CE64 00089DC4  80 0D 8F C8 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8008CE68 00089DC8  7C 06 00 40 */	cmplw r6, r0
/* 8008CE6C 00089DCC  41 81 00 3C */	bgt lbl_8008CEA8
/* 8008CE70 00089DD0  80 65 00 08 */	lwz r3, 8(r5)
/* 8008CE74 00089DD4  28 03 00 00 */	cmplwi r3, 0
/* 8008CE78 00089DD8  40 82 00 14 */	bne lbl_8008CE8C
/* 8008CE7C 00089DDC  80 85 00 10 */	lwz r4, 0x10(r5)
/* 8008CE80 00089DE0  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 8008CE84 00089DE4  4B FF F3 F1 */	bl ARStartDMA
/* 8008CE88 00089DE8  48 00 00 10 */	b lbl_8008CE98
lbl_8008CE8C:
/* 8008CE8C 00089DEC  80 85 00 14 */	lwz r4, 0x14(r5)
/* 8008CE90 00089DF0  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 8008CE94 00089DF4  4B FF F3 E1 */	bl ARStartDMA
lbl_8008CE98:
/* 8008CE98 00089DF8  80 6D 8F BC */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CE9C 00089DFC  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8008CEA0 00089E00  90 0D 8F C4 */	stw r0, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8008CEA4 00089E04  48 00 00 34 */	b lbl_8008CED8
lbl_8008CEA8:
/* 8008CEA8 00089E08  80 65 00 08 */	lwz r3, 8(r5)
/* 8008CEAC 00089E0C  28 03 00 00 */	cmplwi r3, 0
/* 8008CEB0 00089E10  40 82 00 18 */	bne lbl_8008CEC8
/* 8008CEB4 00089E14  80 85 00 10 */	lwz r4, 0x10(r5)
/* 8008CEB8 00089E18  7C 06 03 78 */	mr r6, r0
/* 8008CEBC 00089E1C  80 A5 00 14 */	lwz r5, 0x14(r5)
/* 8008CEC0 00089E20  4B FF F3 B5 */	bl ARStartDMA
/* 8008CEC4 00089E24  48 00 00 14 */	b lbl_8008CED8
lbl_8008CEC8:
/* 8008CEC8 00089E28  80 85 00 14 */	lwz r4, 0x14(r5)
/* 8008CECC 00089E2C  7C 06 03 78 */	mr r6, r0
/* 8008CED0 00089E30  80 A5 00 10 */	lwz r5, 0x10(r5)
/* 8008CED4 00089E34  4B FF F3 A1 */	bl ARStartDMA
lbl_8008CED8:
/* 8008CED8 00089E38  80 6D 8F BC */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CEDC 00089E3C  80 8D 8F C8 */	lwz r4, __ARQChunkSize-_SDA_BASE_(r13)
/* 8008CEE0 00089E40  80 03 00 18 */	lwz r0, 0x18(r3)
/* 8008CEE4 00089E44  7C 04 00 50 */	subf r0, r4, r0
/* 8008CEE8 00089E48  90 03 00 18 */	stw r0, 0x18(r3)
/* 8008CEEC 00089E4C  80 8D 8F BC */	lwz r4, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CEF0 00089E50  80 0D 8F C8 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8008CEF4 00089E54  80 64 00 10 */	lwz r3, 0x10(r4)
/* 8008CEF8 00089E58  7C 03 02 14 */	add r0, r3, r0
/* 8008CEFC 00089E5C  90 04 00 10 */	stw r0, 0x10(r4)
/* 8008CF00 00089E60  80 8D 8F BC */	lwz r4, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CF04 00089E64  80 0D 8F C8 */	lwz r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8008CF08 00089E68  80 64 00 14 */	lwz r3, 0x14(r4)
/* 8008CF0C 00089E6C  7C 03 02 14 */	add r0, r3, r0
/* 8008CF10 00089E70  90 04 00 14 */	stw r0, 0x14(r4)
lbl_8008CF14:
/* 8008CF14 00089E74  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8008CF18 00089E78  38 21 00 08 */	addi r1, r1, 8
/* 8008CF1C 00089E7C  7C 08 03 A6 */	mtlr r0
/* 8008CF20 00089E80  4E 80 00 20 */	blr 

.global __ARQCallbackHack
__ARQCallbackHack:
/* 8008CF24 00089E84  4E 80 00 20 */	blr 

.global __ARQInterruptServiceRoutine
__ARQInterruptServiceRoutine:
/* 8008CF28 00089E88  7C 08 02 A6 */	mflr r0
/* 8008CF2C 00089E8C  90 01 00 04 */	stw r0, 4(r1)
/* 8008CF30 00089E90  94 21 FF F8 */	stwu r1, -8(r1)
/* 8008CF34 00089E94  81 8D 8F C0 */	lwz r12, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8008CF38 00089E98  28 0C 00 00 */	cmplwi r12, 0
/* 8008CF3C 00089E9C  41 82 00 20 */	beq lbl_8008CF5C
/* 8008CF40 00089EA0  80 6D 8F B8 */	lwz r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008CF44 00089EA4  7D 88 03 A6 */	mtlr r12
/* 8008CF48 00089EA8  4E 80 00 21 */	blrl 
/* 8008CF4C 00089EAC  38 00 00 00 */	li r0, 0
/* 8008CF50 00089EB0  90 0D 8F B8 */	stw r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008CF54 00089EB4  90 0D 8F C0 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8008CF58 00089EB8  48 00 00 28 */	b lbl_8008CF80
lbl_8008CF5C:
/* 8008CF5C 00089EBC  81 8D 8F C4 */	lwz r12, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8008CF60 00089EC0  28 0C 00 00 */	cmplwi r12, 0
/* 8008CF64 00089EC4  41 82 00 1C */	beq lbl_8008CF80
/* 8008CF68 00089EC8  80 6D 8F BC */	lwz r3, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CF6C 00089ECC  7D 88 03 A6 */	mtlr r12
/* 8008CF70 00089ED0  4E 80 00 21 */	blrl 
/* 8008CF74 00089ED4  38 00 00 00 */	li r0, 0
/* 8008CF78 00089ED8  90 0D 8F BC */	stw r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008CF7C 00089EDC  90 0D 8F C4 */	stw r0, __ARQCallbackLo-_SDA_BASE_(r13)
lbl_8008CF80:
/* 8008CF80 00089EE0  80 CD 8F A8 */	lwz r6, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008CF84 00089EE4  28 06 00 00 */	cmplwi r6, 0
/* 8008CF88 00089EE8  41 82 00 4C */	beq lbl_8008CFD4
/* 8008CF8C 00089EEC  80 66 00 08 */	lwz r3, 8(r6)
/* 8008CF90 00089EF0  28 03 00 00 */	cmplwi r3, 0
/* 8008CF94 00089EF4  40 82 00 18 */	bne lbl_8008CFAC
/* 8008CF98 00089EF8  80 86 00 10 */	lwz r4, 0x10(r6)
/* 8008CF9C 00089EFC  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 8008CFA0 00089F00  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8008CFA4 00089F04  4B FF F2 D1 */	bl ARStartDMA
/* 8008CFA8 00089F08  48 00 00 14 */	b lbl_8008CFBC
lbl_8008CFAC:
/* 8008CFAC 00089F0C  80 86 00 14 */	lwz r4, 0x14(r6)
/* 8008CFB0 00089F10  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 8008CFB4 00089F14  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8008CFB8 00089F18  4B FF F2 BD */	bl ARStartDMA
lbl_8008CFBC:
/* 8008CFBC 00089F1C  80 6D 8F A8 */	lwz r3, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008CFC0 00089F20  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8008CFC4 00089F24  90 0D 8F C0 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8008CFC8 00089F28  90 6D 8F B8 */	stw r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008CFCC 00089F2C  80 03 00 00 */	lwz r0, 0(r3)
/* 8008CFD0 00089F30  90 0D 8F A8 */	stw r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8008CFD4:
/* 8008CFD4 00089F34  80 0D 8F B8 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008CFD8 00089F38  28 00 00 00 */	cmplwi r0, 0
/* 8008CFDC 00089F3C  40 82 00 08 */	bne lbl_8008CFE4
/* 8008CFE0 00089F40  4B FF FE 45 */	bl __ARQServiceQueueLo
lbl_8008CFE4:
/* 8008CFE4 00089F44  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8008CFE8 00089F48  38 21 00 08 */	addi r1, r1, 8
/* 8008CFEC 00089F4C  7C 08 03 A6 */	mtlr r0
/* 8008CFF0 00089F50  4E 80 00 20 */	blr 

.global ARQInit
ARQInit:
/* 8008CFF4 00089F54  7C 08 02 A6 */	mflr r0
/* 8008CFF8 00089F58  90 01 00 04 */	stw r0, 4(r1)
/* 8008CFFC 00089F5C  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8008D000 00089F60  93 E1 00 0C */	stw r31, 0xc(r1)
/* 8008D004 00089F64  80 0D 8F CC */	lwz r0, __ARQ_init_flag-_SDA_BASE_(r13)
/* 8008D008 00089F68  2C 00 00 01 */	cmpwi r0, 1
/* 8008D00C 00089F6C  41 82 00 3C */	beq lbl_8008D048
/* 8008D010 00089F70  3B E0 00 00 */	li r31, 0
/* 8008D014 00089F74  38 00 10 00 */	li r0, 0x1000
/* 8008D018 00089F78  93 ED 8F B0 */	stw r31, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8008D01C 00089F7C  3C 60 80 09 */	lis r3, __ARQInterruptServiceRoutine@ha
/* 8008D020 00089F80  93 ED 8F A8 */	stw r31, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008D024 00089F84  38 63 CF 28 */	addi r3, r3, __ARQInterruptServiceRoutine@l
/* 8008D028 00089F88  90 0D 8F C8 */	stw r0, __ARQChunkSize-_SDA_BASE_(r13)
/* 8008D02C 00089F8C  4B FF F2 05 */	bl ARRegisterDMACallback
/* 8008D030 00089F90  38 00 00 01 */	li r0, 1
/* 8008D034 00089F94  93 ED 8F B8 */	stw r31, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008D038 00089F98  93 ED 8F BC */	stw r31, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008D03C 00089F9C  93 ED 8F C0 */	stw r31, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8008D040 00089FA0  93 ED 8F C4 */	stw r31, __ARQCallbackLo-_SDA_BASE_(r13)
/* 8008D044 00089FA4  90 0D 8F CC */	stw r0, __ARQ_init_flag-_SDA_BASE_(r13)
lbl_8008D048:
/* 8008D048 00089FA8  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8008D04C 00089FAC  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 8008D050 00089FB0  38 21 00 10 */	addi r1, r1, 0x10
/* 8008D054 00089FB4  7C 08 03 A6 */	mtlr r0
/* 8008D058 00089FB8  4E 80 00 20 */	blr 

.global ARQPostRequest
ARQPostRequest:
/* 8008D05C 00089FBC  7C 08 02 A6 */	mflr r0
/* 8008D060 00089FC0  28 0A 00 00 */	cmplwi r10, 0
/* 8008D064 00089FC4  90 01 00 04 */	stw r0, 4(r1)
/* 8008D068 00089FC8  38 00 00 00 */	li r0, 0
/* 8008D06C 00089FCC  94 21 FF C8 */	stwu r1, -0x38(r1)
/* 8008D070 00089FD0  93 E1 00 34 */	stw r31, 0x34(r1)
/* 8008D074 00089FD4  93 C1 00 30 */	stw r30, 0x30(r1)
/* 8008D078 00089FD8  3B C6 00 00 */	addi r30, r6, 0
/* 8008D07C 00089FDC  93 A1 00 2C */	stw r29, 0x2c(r1)
/* 8008D080 00089FE0  3B A3 00 00 */	addi r29, r3, 0
/* 8008D084 00089FE4  90 03 00 00 */	stw r0, 0(r3)
/* 8008D088 00089FE8  90 83 00 04 */	stw r4, 4(r3)
/* 8008D08C 00089FEC  90 A3 00 08 */	stw r5, 8(r3)
/* 8008D090 00089FF0  90 E3 00 10 */	stw r7, 0x10(r3)
/* 8008D094 00089FF4  91 03 00 14 */	stw r8, 0x14(r3)
/* 8008D098 00089FF8  91 23 00 18 */	stw r9, 0x18(r3)
/* 8008D09C 00089FFC  41 82 00 0C */	beq lbl_8008D0A8
/* 8008D0A0 0008A000  91 5D 00 1C */	stw r10, 0x1c(r29)
/* 8008D0A4 0008A004  48 00 00 10 */	b lbl_8008D0B4
lbl_8008D0A8:
/* 8008D0A8 0008A008  3C 60 80 09 */	lis r3, __ARQCallbackHack@ha
/* 8008D0AC 0008A00C  38 03 CF 24 */	addi r0, r3, __ARQCallbackHack@l
/* 8008D0B0 0008A010  90 1D 00 1C */	stw r0, 0x1c(r29)
lbl_8008D0B4:
/* 8008D0B4 0008A014  4B FE DB 71 */	bl OSDisableInterrupts
/* 8008D0B8 0008A018  2C 1E 00 01 */	cmpwi r30, 1
/* 8008D0BC 0008A01C  3B E3 00 00 */	addi r31, r3, 0
/* 8008D0C0 0008A020  41 82 00 38 */	beq lbl_8008D0F8
/* 8008D0C4 0008A024  40 80 00 54 */	bge lbl_8008D118
/* 8008D0C8 0008A028  2C 1E 00 00 */	cmpwi r30, 0
/* 8008D0CC 0008A02C  40 80 00 08 */	bge lbl_8008D0D4
/* 8008D0D0 0008A030  48 00 00 48 */	b lbl_8008D118
lbl_8008D0D4:
/* 8008D0D4 0008A034  80 0D 8F B0 */	lwz r0, __ARQRequestQueueLo-_SDA_BASE_(r13)
/* 8008D0D8 0008A038  28 00 00 00 */	cmplwi r0, 0
/* 8008D0DC 0008A03C  41 82 00 10 */	beq lbl_8008D0EC
/* 8008D0E0 0008A040  80 6D 8F B4 */	lwz r3, __ARQRequestTailLo-_SDA_BASE_(r13)
/* 8008D0E4 0008A044  93 A3 00 00 */	stw r29, 0(r3)
/* 8008D0E8 0008A048  48 00 00 08 */	b lbl_8008D0F0
lbl_8008D0EC:
/* 8008D0EC 0008A04C  93 AD 8F B0 */	stw r29, __ARQRequestQueueLo-_SDA_BASE_(r13)
lbl_8008D0F0:
/* 8008D0F0 0008A050  93 AD 8F B4 */	stw r29, __ARQRequestTailLo-_SDA_BASE_(r13)
/* 8008D0F4 0008A054  48 00 00 24 */	b lbl_8008D118
lbl_8008D0F8:
/* 8008D0F8 0008A058  80 0D 8F A8 */	lwz r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008D0FC 0008A05C  28 00 00 00 */	cmplwi r0, 0
/* 8008D100 0008A060  41 82 00 10 */	beq lbl_8008D110
/* 8008D104 0008A064  80 6D 8F AC */	lwz r3, __ARQRequestTailHi-_SDA_BASE_(r13)
/* 8008D108 0008A068  93 A3 00 00 */	stw r29, 0(r3)
/* 8008D10C 0008A06C  48 00 00 08 */	b lbl_8008D114
lbl_8008D110:
/* 8008D110 0008A070  93 AD 8F A8 */	stw r29, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8008D114:
/* 8008D114 0008A074  93 AD 8F AC */	stw r29, __ARQRequestTailHi-_SDA_BASE_(r13)
lbl_8008D118:
/* 8008D118 0008A078  80 0D 8F B8 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008D11C 0008A07C  28 00 00 00 */	cmplwi r0, 0
/* 8008D120 0008A080  40 82 00 74 */	bne lbl_8008D194
/* 8008D124 0008A084  80 0D 8F BC */	lwz r0, __ARQRequestPendingLo-_SDA_BASE_(r13)
/* 8008D128 0008A088  28 00 00 00 */	cmplwi r0, 0
/* 8008D12C 0008A08C  40 82 00 68 */	bne lbl_8008D194
/* 8008D130 0008A090  80 CD 8F A8 */	lwz r6, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008D134 0008A094  28 06 00 00 */	cmplwi r6, 0
/* 8008D138 0008A098  41 82 00 4C */	beq lbl_8008D184
/* 8008D13C 0008A09C  80 66 00 08 */	lwz r3, 8(r6)
/* 8008D140 0008A0A0  28 03 00 00 */	cmplwi r3, 0
/* 8008D144 0008A0A4  40 82 00 18 */	bne lbl_8008D15C
/* 8008D148 0008A0A8  80 86 00 10 */	lwz r4, 0x10(r6)
/* 8008D14C 0008A0AC  80 A6 00 14 */	lwz r5, 0x14(r6)
/* 8008D150 0008A0B0  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8008D154 0008A0B4  4B FF F1 21 */	bl ARStartDMA
/* 8008D158 0008A0B8  48 00 00 14 */	b lbl_8008D16C
lbl_8008D15C:
/* 8008D15C 0008A0BC  80 86 00 14 */	lwz r4, 0x14(r6)
/* 8008D160 0008A0C0  80 A6 00 10 */	lwz r5, 0x10(r6)
/* 8008D164 0008A0C4  80 C6 00 18 */	lwz r6, 0x18(r6)
/* 8008D168 0008A0C8  4B FF F1 0D */	bl ARStartDMA
lbl_8008D16C:
/* 8008D16C 0008A0CC  80 6D 8F A8 */	lwz r3, __ARQRequestQueueHi-_SDA_BASE_(r13)
/* 8008D170 0008A0D0  80 03 00 1C */	lwz r0, 0x1c(r3)
/* 8008D174 0008A0D4  90 0D 8F C0 */	stw r0, __ARQCallbackHi-_SDA_BASE_(r13)
/* 8008D178 0008A0D8  90 6D 8F B8 */	stw r3, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008D17C 0008A0DC  80 03 00 00 */	lwz r0, 0(r3)
/* 8008D180 0008A0E0  90 0D 8F A8 */	stw r0, __ARQRequestQueueHi-_SDA_BASE_(r13)
lbl_8008D184:
/* 8008D184 0008A0E4  80 0D 8F B8 */	lwz r0, __ARQRequestPendingHi-_SDA_BASE_(r13)
/* 8008D188 0008A0E8  28 00 00 00 */	cmplwi r0, 0
/* 8008D18C 0008A0EC  40 82 00 08 */	bne lbl_8008D194
/* 8008D190 0008A0F0  4B FF FC 95 */	bl __ARQServiceQueueLo
lbl_8008D194:
/* 8008D194 0008A0F4  7F E3 FB 78 */	mr r3, r31
/* 8008D198 0008A0F8  4B FE DA B5 */	bl OSRestoreInterrupts
/* 8008D19C 0008A0FC  80 01 00 3C */	lwz r0, 0x3c(r1)
/* 8008D1A0 0008A100  83 E1 00 34 */	lwz r31, 0x34(r1)
/* 8008D1A4 0008A104  83 C1 00 30 */	lwz r30, 0x30(r1)
/* 8008D1A8 0008A108  83 A1 00 2C */	lwz r29, 0x2c(r1)
/* 8008D1AC 0008A10C  38 21 00 38 */	addi r1, r1, 0x38
/* 8008D1B0 0008A110  7C 08 03 A6 */	mtlr r0
/* 8008D1B4 0008A114  4E 80 00 20 */	blr 
