.include "macros.inc"

.section .text

.org 0x80049168

.global ReadProc
ReadProc:
/* 80049168 000460C8  7C 08 02 A6 */	mflr r0
/* 8004916C 000460CC  3C 80 80 1F */	lis r4, __GBA@ha
/* 80049170 000460D0  90 01 00 04 */	stw r0, 4(r1)
/* 80049174 000460D4  54 63 40 2E */	slwi r3, r3, 8
/* 80049178 000460D8  38 04 6D 80 */	addi r0, r4, __GBA@l
/* 8004917C 000460DC  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 80049180 000460E0  93 E1 00 14 */	stw r31, 0x14(r1)
/* 80049184 000460E4  7F E0 1A 14 */	add r31, r0, r3
/* 80049188 000460E8  80 1F 00 20 */	lwz r0, 0x20(r31)
/* 8004918C 000460EC  2C 00 00 00 */	cmpwi r0, 0
/* 80049190 000460F0  40 82 00 24 */	bne lbl_800491B4
/* 80049194 000460F4  80 7F 00 18 */	lwz r3, 0x18(r31)
/* 80049198 000460F8  38 9F 00 05 */	addi r4, r31, 5
/* 8004919C 000460FC  38 A0 00 04 */	li r5, 4
/* 800491A0 00046100  4B FB A2 F1 */	bl memcpy
/* 800491A4 00046104  88 1F 00 09 */	lbz r0, 9(r31)
/* 800491A8 00046108  80 7F 00 14 */	lwz r3, 0x14(r31)
/* 800491AC 0004610C  70 00 00 3A */	andi. r0, r0, 0x3a
/* 800491B0 00046110  98 03 00 00 */	stb r0, 0(r3)
lbl_800491B4:
/* 800491B4 00046114  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800491B8 00046118  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800491BC 0004611C  38 21 00 18 */	addi r1, r1, 0x18
/* 800491C0 00046120  7C 08 03 A6 */	mtlr r0
/* 800491C4 00046124  4E 80 00 20 */	blr 

.global GBAReadAsync
GBAReadAsync:
/* 800491C8 00046128  7C 08 02 A6 */	mflr r0
/* 800491CC 0004612C  3C E0 80 1F */	lis r7, __GBA@ha
/* 800491D0 00046130  90 01 00 04 */	stw r0, 4(r1)
/* 800491D4 00046134  54 68 40 2E */	slwi r8, r3, 8
/* 800491D8 00046138  38 07 6D 80 */	addi r0, r7, __GBA@l
/* 800491DC 0004613C  94 21 FF F8 */	stwu r1, -8(r1)
/* 800491E0 00046140  7D 00 42 14 */	add r8, r0, r8
/* 800491E4 00046144  80 08 00 1C */	lwz r0, 0x1c(r8)
/* 800491E8 00046148  28 00 00 00 */	cmplwi r0, 0
/* 800491EC 0004614C  41 82 00 0C */	beq lbl_800491F8
/* 800491F0 00046150  38 60 00 02 */	li r3, 2
/* 800491F4 00046154  48 00 00 30 */	b lbl_80049224
lbl_800491F8:
/* 800491F8 00046158  38 00 00 14 */	li r0, 0x14
/* 800491FC 0004615C  98 08 00 00 */	stb r0, 0(r8)
/* 80049200 00046160  3C E0 80 05 */	lis r7, ReadProc@ha
/* 80049204 00046164  38 07 91 68 */	addi r0, r7, ReadProc@l
/* 80049208 00046168  90 88 00 18 */	stw r4, 0x18(r8)
/* 8004920C 0004616C  38 80 00 01 */	li r4, 1
/* 80049210 00046170  90 A8 00 14 */	stw r5, 0x14(r8)
/* 80049214 00046174  38 A0 00 05 */	li r5, 5
/* 80049218 00046178  90 C8 00 1C */	stw r6, 0x1c(r8)
/* 8004921C 0004617C  7C 06 03 78 */	mr r6, r0
/* 80049220 00046180  48 00 04 D1 */	bl __GBATransfer
lbl_80049224:
/* 80049224 00046184  80 01 00 0C */	lwz r0, 0xc(r1)
/* 80049228 00046188  38 21 00 08 */	addi r1, r1, 8
/* 8004922C 0004618C  7C 08 03 A6 */	mtlr r0
/* 80049230 00046190  4E 80 00 20 */	blr 

.global GBARead
GBARead:
/* 80049234 00046194  7C 08 02 A6 */	mflr r0
/* 80049238 00046198  90 01 00 04 */	stw r0, 4(r1)
/* 8004923C 0004619C  94 21 FF D8 */	stwu r1, -0x28(r1)
/* 80049240 000461A0  93 E1 00 24 */	stw r31, 0x24(r1)
/* 80049244 000461A4  3B E3 00 00 */	addi r31, r3, 0
/* 80049248 000461A8  3C 60 80 1F */	lis r3, __GBA@ha
/* 8004924C 000461AC  57 E6 40 2E */	slwi r6, r31, 8
/* 80049250 000461B0  38 03 6D 80 */	addi r0, r3, __GBA@l
/* 80049254 000461B4  7D 00 32 14 */	add r8, r0, r6
/* 80049258 000461B8  80 08 00 1C */	lwz r0, 0x1c(r8)
/* 8004925C 000461BC  28 00 00 00 */	cmplwi r0, 0
/* 80049260 000461C0  41 82 00 0C */	beq lbl_8004926C
/* 80049264 000461C4  38 60 00 02 */	li r3, 2
/* 80049268 000461C8  48 00 00 38 */	b lbl_800492A0
lbl_8004926C:
/* 8004926C 000461CC  38 00 00 14 */	li r0, 0x14
/* 80049270 000461D0  98 08 00 00 */	stb r0, 0(r8)
/* 80049274 000461D4  3C E0 80 05 */	lis r7, __GBASyncCallback@ha
/* 80049278 000461D8  3C 60 80 05 */	lis r3, ReadProc@ha
/* 8004927C 000461DC  90 88 00 18 */	stw r4, 0x18(r8)
/* 80049280 000461E0  38 C3 91 68 */	addi r6, r3, ReadProc@l
/* 80049284 000461E4  38 07 95 2C */	addi r0, r7, __GBASyncCallback@l
/* 80049288 000461E8  90 A8 00 14 */	stw r5, 0x14(r8)
/* 8004928C 000461EC  7F E3 FB 78 */	mr r3, r31
/* 80049290 000461F0  38 80 00 01 */	li r4, 1
/* 80049294 000461F4  90 08 00 1C */	stw r0, 0x1c(r8)
/* 80049298 000461F8  38 A0 00 05 */	li r5, 5
/* 8004929C 000461FC  48 00 04 55 */	bl __GBATransfer
lbl_800492A0:
/* 800492A0 00046200  2C 03 00 00 */	cmpwi r3, 0
/* 800492A4 00046204  41 82 00 08 */	beq lbl_800492AC
/* 800492A8 00046208  48 00 00 0C */	b lbl_800492B4
lbl_800492AC:
/* 800492AC 0004620C  7F E3 FB 78 */	mr r3, r31
/* 800492B0 00046210  48 00 02 B1 */	bl __GBASync
lbl_800492B4:
/* 800492B4 00046214  80 01 00 2C */	lwz r0, 0x2c(r1)
/* 800492B8 00046218  83 E1 00 24 */	lwz r31, 0x24(r1)
/* 800492BC 0004621C  38 21 00 28 */	addi r1, r1, 0x28
/* 800492C0 00046220  7C 08 03 A6 */	mtlr r0
/* 800492C4 00046224  4E 80 00 20 */	blr 
