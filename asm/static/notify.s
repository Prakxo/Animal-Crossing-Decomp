.include "macros.inc"

.section .text

.org 0x800A66C8

.global TRKDoNotifyStopped
TRKDoNotifyStopped:
/* 800A66C8 000A3628  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800A66CC 000A362C  7C 08 02 A6 */	mflr r0
/* 800A66D0 000A3630  90 01 00 24 */	stw r0, 0x24(r1)
/* 800A66D4 000A3634  38 81 00 08 */	addi r4, r1, 8
/* 800A66D8 000A3638  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800A66DC 000A363C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800A66E0 000A3640  7C 7E 1B 78 */	mr r30, r3
/* 800A66E4 000A3644  38 61 00 0C */	addi r3, r1, 0xc
/* 800A66E8 000A3648  4B FF C8 79 */	bl TRKGetFreeBuffer
/* 800A66EC 000A364C  7C 7F 1B 79 */	or. r31, r3, r3
/* 800A66F0 000A3650  40 82 00 94 */	bne lbl_800A6784
/* 800A66F4 000A3654  80 A1 00 08 */	lwz r5, 8(r1)
/* 800A66F8 000A3658  80 65 00 0C */	lwz r3, 0xc(r5)
/* 800A66FC 000A365C  28 03 08 80 */	cmplwi r3, 0x880
/* 800A6700 000A3660  41 80 00 0C */	blt lbl_800A670C
/* 800A6704 000A3664  38 80 03 01 */	li r4, 0x301
/* 800A6708 000A3668  48 00 00 24 */	b lbl_800A672C
lbl_800A670C:
/* 800A670C 000A366C  38 03 00 01 */	addi r0, r3, 1
/* 800A6710 000A3670  7C 65 1A 14 */	add r3, r5, r3
/* 800A6714 000A3674  90 05 00 0C */	stw r0, 0xc(r5)
/* 800A6718 000A3678  38 80 00 00 */	li r4, 0
/* 800A671C 000A367C  9B C3 00 10 */	stb r30, 0x10(r3)
/* 800A6720 000A3680  80 65 00 08 */	lwz r3, 8(r5)
/* 800A6724 000A3684  38 03 00 01 */	addi r0, r3, 1
/* 800A6728 000A3688  90 05 00 08 */	stw r0, 8(r5)
lbl_800A672C:
/* 800A672C 000A368C  2C 04 00 00 */	cmpwi r4, 0
/* 800A6730 000A3690  40 82 00 24 */	bne lbl_800A6754
/* 800A6734 000A3694  57 C0 06 3E */	clrlwi r0, r30, 0x18
/* 800A6738 000A3698  28 00 00 90 */	cmplwi r0, 0x90
/* 800A673C 000A369C  40 82 00 10 */	bne lbl_800A674C
/* 800A6740 000A36A0  80 61 00 08 */	lwz r3, 8(r1)
/* 800A6744 000A36A4  48 00 0B 31 */	bl TRKTargetAddStopInfo
/* 800A6748 000A36A8  48 00 00 0C */	b lbl_800A6754
lbl_800A674C:
/* 800A674C 000A36AC  80 61 00 08 */	lwz r3, 8(r1)
/* 800A6750 000A36B0  48 00 0A 79 */	bl TRKTargetAddExceptionInfo
lbl_800A6754:
/* 800A6754 000A36B4  80 61 00 08 */	lwz r3, 8(r1)
/* 800A6758 000A36B8  38 81 00 10 */	addi r4, r1, 0x10
/* 800A675C 000A36BC  38 A0 00 02 */	li r5, 2
/* 800A6760 000A36C0  38 C0 00 03 */	li r6, 3
/* 800A6764 000A36C4  38 E0 00 01 */	li r7, 1
/* 800A6768 000A36C8  4B FF FA E1 */	bl TRKRequestSend
/* 800A676C 000A36CC  7C 7F 1B 79 */	or. r31, r3, r3
/* 800A6770 000A36D0  40 82 00 0C */	bne lbl_800A677C
/* 800A6774 000A36D4  80 61 00 10 */	lwz r3, 0x10(r1)
/* 800A6778 000A36D8  4B FF C7 59 */	bl TRKReleaseBuffer
lbl_800A677C:
/* 800A677C 000A36DC  80 61 00 0C */	lwz r3, 0xc(r1)
/* 800A6780 000A36E0  4B FF C7 51 */	bl TRKReleaseBuffer
lbl_800A6784:
/* 800A6784 000A36E4  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800A6788 000A36E8  7F E3 FB 78 */	mr r3, r31
/* 800A678C 000A36EC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800A6790 000A36F0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800A6794 000A36F4  7C 08 03 A6 */	mtlr r0
/* 800A6798 000A36F8  38 21 00 20 */	addi r1, r1, 0x20
/* 800A679C 000A36FC  4E 80 00 20 */	blr 
