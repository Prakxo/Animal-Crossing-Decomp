.include "macros.inc"

.section .text

.org 0x800830B4

.global SISetSamplingRate
SISetSamplingRate:
/* 800830B4 00080014  7C 08 02 A6 */	mflr r0
/* 800830B8 00080018  90 01 00 04 */	stw r0, 4(r1)
/* 800830BC 0008001C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800830C0 00080020  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800830C4 00080024  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800830C8 00080028  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800830CC 0008002C  3B A3 00 00 */	addi r29, r3, 0
/* 800830D0 00080030  28 1D 00 0B */	cmplwi r29, 0xb
/* 800830D4 00080034  3C 60 80 0E */	lis r3, XYNTSC@ha
/* 800830D8 00080038  3B E3 0A F8 */	addi r31, r3, XYNTSC@l
/* 800830DC 0008003C  40 81 00 08 */	ble lbl_800830E4
/* 800830E0 00080040  3B A0 00 0B */	li r29, 0xb
lbl_800830E4:
/* 800830E4 00080044  4B FF 7B 41 */	bl OSDisableInterrupts
/* 800830E8 00080048  93 AD 8E 00 */	stw r29, SamplingRate-_SDA_BASE_(r13)
/* 800830EC 0008004C  7C 7E 1B 78 */	mr r30, r3
/* 800830F0 00080050  48 00 69 55 */	bl VIGetTvFormat
/* 800830F4 00080054  2C 03 00 02 */	cmpwi r3, 2
/* 800830F8 00080058  41 82 00 24 */	beq lbl_8008311C
/* 800830FC 0008005C  40 80 00 14 */	bge lbl_80083110
/* 80083100 00080060  2C 03 00 00 */	cmpwi r3, 0
/* 80083104 00080064  41 82 00 18 */	beq lbl_8008311C
/* 80083108 00080068  40 80 00 1C */	bge lbl_80083124
/* 8008310C 0008006C  48 00 00 20 */	b lbl_8008312C
lbl_80083110:
/* 80083110 00080070  2C 03 00 05 */	cmpwi r3, 5
/* 80083114 00080074  41 82 00 08 */	beq lbl_8008311C
/* 80083118 00080078  48 00 00 14 */	b lbl_8008312C
lbl_8008311C:
/* 8008311C 0008007C  7F E4 FB 78 */	mr r4, r31
/* 80083120 00080080  48 00 00 20 */	b lbl_80083140
lbl_80083124:
/* 80083124 00080084  38 9F 00 30 */	addi r4, r31, 0x30
/* 80083128 00080088  48 00 00 18 */	b lbl_80083140
lbl_8008312C:
/* 8008312C 0008008C  38 7F 00 60 */	addi r3, r31, 0x60
/* 80083130 00080090  4C C6 31 82 */	crclr 6
/* 80083134 00080094  4B FD 76 1D */	bl OSReport
/* 80083138 00080098  3B A0 00 00 */	li r29, 0
/* 8008313C 0008009C  38 9F 00 00 */	addi r4, r31, 0
lbl_80083140:
/* 80083140 000800A0  3C 60 CC 00 */	lis r3, 0xCC00206C@ha
/* 80083144 000800A4  A0 03 20 6C */	lhz r0, 0xCC00206C@l(r3)
/* 80083148 000800A8  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 8008314C 000800AC  41 82 00 0C */	beq lbl_80083158
/* 80083150 000800B0  38 A0 00 02 */	li r5, 2
/* 80083154 000800B4  48 00 00 08 */	b lbl_8008315C
lbl_80083158:
/* 80083158 000800B8  38 A0 00 01 */	li r5, 1
lbl_8008315C:
/* 8008315C 000800BC  57 A3 10 3A */	slwi r3, r29, 2
/* 80083160 000800C0  7C 04 1A 2E */	lhzx r0, r4, r3
/* 80083164 000800C4  7C 64 1A 14 */	add r3, r4, r3
/* 80083168 000800C8  88 83 00 02 */	lbz r4, 2(r3)
/* 8008316C 000800CC  7C 65 01 D6 */	mullw r3, r5, r0
/* 80083170 000800D0  4B FF F4 A9 */	bl SISetXY
/* 80083174 000800D4  7F C3 F3 78 */	mr r3, r30
/* 80083178 000800D8  4B FF 7A D5 */	bl OSRestoreInterrupts
/* 8008317C 000800DC  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80083180 000800E0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80083184 000800E4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80083188 000800E8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8008318C 000800EC  38 21 00 20 */	addi r1, r1, 0x20
/* 80083190 000800F0  7C 08 03 A6 */	mtlr r0
/* 80083194 000800F4  4E 80 00 20 */	blr 

.global SIRefreshSamplingRate
SIRefreshSamplingRate:
/* 80083198 000800F8  7C 08 02 A6 */	mflr r0
/* 8008319C 000800FC  90 01 00 04 */	stw r0, 4(r1)
/* 800831A0 00080100  94 21 FF F8 */	stwu r1, -8(r1)
/* 800831A4 00080104  80 6D 8E 00 */	lwz r3, SamplingRate-_SDA_BASE_(r13)
/* 800831A8 00080108  4B FF FF 0D */	bl SISetSamplingRate
/* 800831AC 0008010C  80 01 00 0C */	lwz r0, 0xc(r1)
/* 800831B0 00080110  38 21 00 08 */	addi r1, r1, 8
/* 800831B4 00080114  7C 08 03 A6 */	mtlr r0
/* 800831B8 00080118  4E 80 00 20 */	blr 
