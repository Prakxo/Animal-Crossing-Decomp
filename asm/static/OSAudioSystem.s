.include "macros.inc"

.section .text

.org 0x800798AC

.global __OSInitAudioSystem
__OSInitAudioSystem:
/* 800798AC 0007680C  7C 08 02 A6 */	mflr r0
/* 800798B0 00076810  90 01 00 04 */	stw r0, 4(r1)
/* 800798B4 00076814  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 800798B8 00076818  BF 21 00 14 */	stmw r25, 0x14(r1)
/* 800798BC 0007681C  4B FF FF D1 */	bl OSGetArenaHi
/* 800798C0 00076820  3C 80 81 00 */	lis r4, 0x8100
/* 800798C4 00076824  38 A0 00 80 */	li r5, 0x80
/* 800798C8 00076828  38 63 FF 80 */	addi r3, r3, -128
/* 800798CC 0007682C  4B F8 9B C5 */	bl memcpy
/* 800798D0 00076830  3C 60 80 0E */	lis r3, DSPInitCode@ha
/* 800798D4 00076834  38 83 F9 80 */	addi r4, r3, DSPInitCode@l
/* 800798D8 00076838  3C 60 81 00 */	lis r3, 0x8100
/* 800798DC 0007683C  38 A0 00 80 */	li r5, 0x80
/* 800798E0 00076840  4B F8 9B B1 */	bl memcpy
/* 800798E4 00076844  3C 60 81 00 */	lis r3, 0x8100
/* 800798E8 00076848  38 80 00 80 */	li r4, 0x80
/* 800798EC 0007684C  48 00 02 99 */	bl DCFlushRange
/* 800798F0 00076850  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 800798F4 00076854  38 63 50 00 */	addi r3, r3, 0xCC005000@l
/* 800798F8 00076858  38 00 00 43 */	li r0, 0x43
/* 800798FC 0007685C  B0 03 00 12 */	sth r0, 0x12(r3)
/* 80079900 00076860  3B E3 00 0A */	addi r31, r3, 0xa
/* 80079904 00076864  38 00 08 AC */	li r0, 0x8ac
/* 80079908 00076868  B0 03 00 0A */	sth r0, 0xa(r3)
/* 8007990C 0007686C  A0 03 00 0A */	lhz r0, 0xa(r3)
/* 80079910 00076870  60 00 00 01 */	ori r0, r0, 1
/* 80079914 00076874  B0 03 00 0A */	sth r0, 0xa(r3)
lbl_80079918:
/* 80079918 00076878  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8007991C 0007687C  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 80079920 00076880  40 82 FF F8 */	bne lbl_80079918
/* 80079924 00076884  38 00 00 00 */	li r0, 0
/* 80079928 00076888  3C 80 CC 00 */	lis r4, 0xCC005000@ha
/* 8007992C 0007688C  B0 04 50 00 */	sth r0, 0xCC005000@l(r4)
lbl_80079930:
/* 80079930 00076890  3B C4 50 00 */	addi r30, r4, 0x5000
/* 80079934 00076894  A4 7E 00 04 */	lhzu r3, 4(r30)
/* 80079938 00076898  3B A4 50 00 */	addi r29, r4, 0x5000
/* 8007993C 0007689C  A4 1D 00 06 */	lhzu r0, 6(r29)
/* 80079940 000768A0  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 80079944 000768A4  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 80079948 000768A8  40 82 FF E8 */	bne lbl_80079930
/* 8007994C 000768AC  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 80079950 000768B0  3C 00 01 00 */	lis r0, 0x100
/* 80079954 000768B4  3B 63 50 00 */	addi r27, r3, 0xCC005000@l
/* 80079958 000768B8  94 1B 00 20 */	stwu r0, 0x20(r27)
/* 8007995C 000768BC  38 00 00 00 */	li r0, 0
/* 80079960 000768C0  3B 43 50 00 */	addi r26, r3, 0x5000
/* 80079964 000768C4  94 1A 00 24 */	stwu r0, 0x24(r26)
/* 80079968 000768C8  38 00 00 20 */	li r0, 0x20
/* 8007996C 000768CC  3B 23 50 00 */	addi r25, r3, 0x5000
/* 80079970 000768D0  94 19 00 28 */	stwu r0, 0x28(r25)
/* 80079974 000768D4  A0 7F 00 00 */	lhz r3, 0(r31)
/* 80079978 000768D8  48 00 00 08 */	b lbl_80079980
lbl_8007997C:
/* 8007997C 000768DC  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_80079980:
/* 80079980 000768E0  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 80079984 000768E4  41 82 FF F8 */	beq lbl_8007997C
/* 80079988 000768E8  B0 7F 00 00 */	sth r3, 0(r31)
/* 8007998C 000768EC  48 00 5D 85 */	bl OSGetTick
/* 80079990 000768F0  7C 7C 1B 78 */	mr r28, r3
lbl_80079994:
/* 80079994 000768F4  48 00 5D 7D */	bl OSGetTick
/* 80079998 000768F8  7C 1C 18 50 */	subf r0, r28, r3
/* 8007999C 000768FC  2C 00 08 92 */	cmpwi r0, 0x892
/* 800799A0 00076900  41 80 FF F4 */	blt lbl_80079994
/* 800799A4 00076904  3C 00 01 00 */	lis r0, 0x100
/* 800799A8 00076908  90 1B 00 00 */	stw r0, 0(r27)
/* 800799AC 0007690C  38 60 00 00 */	li r3, 0
/* 800799B0 00076910  38 00 00 20 */	li r0, 0x20
/* 800799B4 00076914  90 7A 00 00 */	stw r3, 0(r26)
/* 800799B8 00076918  90 19 00 00 */	stw r0, 0(r25)
/* 800799BC 0007691C  A0 7F 00 00 */	lhz r3, 0(r31)
/* 800799C0 00076920  48 00 00 08 */	b lbl_800799C8
lbl_800799C4:
/* 800799C4 00076924  A0 7F 00 00 */	lhz r3, 0(r31)
lbl_800799C8:
/* 800799C8 00076928  54 60 06 B5 */	rlwinm. r0, r3, 0, 0x1a, 0x1a
/* 800799CC 0007692C  41 82 FF F8 */	beq lbl_800799C4
/* 800799D0 00076930  B0 7F 00 00 */	sth r3, 0(r31)
/* 800799D4 00076934  A0 1F 00 00 */	lhz r0, 0(r31)
/* 800799D8 00076938  54 00 05 66 */	rlwinm r0, r0, 0, 0x15, 0x13
/* 800799DC 0007693C  B0 1F 00 00 */	sth r0, 0(r31)
lbl_800799E0:
/* 800799E0 00076940  A0 1F 00 00 */	lhz r0, 0(r31)
/* 800799E4 00076944  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 800799E8 00076948  40 82 FF F8 */	bne lbl_800799E0
/* 800799EC 0007694C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 800799F0 00076950  54 00 07 B8 */	rlwinm r0, r0, 0, 0x1e, 0x1c
/* 800799F4 00076954  B0 1F 00 00 */	sth r0, 0(r31)
/* 800799F8 00076958  A0 1E 00 00 */	lhz r0, 0(r30)
/* 800799FC 0007695C  48 00 00 08 */	b lbl_80079A04
lbl_80079A00:
/* 80079A00 00076960  A0 1E 00 00 */	lhz r0, 0(r30)
lbl_80079A04:
/* 80079A04 00076964  54 05 04 3E */	clrlwi r5, r0, 0x10
/* 80079A08 00076968  54 00 04 21 */	rlwinm. r0, r0, 0, 0x10, 0x10
/* 80079A0C 0007696C  41 82 FF F4 */	beq lbl_80079A00
/* 80079A10 00076970  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079A14 00076974  A0 9D 00 00 */	lhz r4, 0(r29)
/* 80079A18 00076978  60 00 00 04 */	ori r0, r0, 4
/* 80079A1C 0007697C  B0 1F 00 00 */	sth r0, 0(r31)
/* 80079A20 00076980  38 00 08 AC */	li r0, 0x8ac
/* 80079A24 00076984  B0 1F 00 00 */	sth r0, 0(r31)
/* 80079A28 00076988  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079A2C 0007698C  60 00 00 01 */	ori r0, r0, 1
/* 80079A30 00076990  B0 1F 00 00 */	sth r0, 0(r31)
lbl_80079A34:
/* 80079A34 00076994  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079A38 00076998  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 80079A3C 0007699C  40 82 FF F8 */	bne lbl_80079A34
/* 80079A40 000769A0  4B FF FE 4D */	bl OSGetArenaHi
/* 80079A44 000769A4  38 83 FF 80 */	addi r4, r3, -128
/* 80079A48 000769A8  3C 60 81 00 */	lis r3, 0x8100
/* 80079A4C 000769AC  38 A0 00 80 */	li r5, 0x80
/* 80079A50 000769B0  4B F8 9A 41 */	bl memcpy
/* 80079A54 000769B4  BB 21 00 14 */	lmw r25, 0x14(r1)
/* 80079A58 000769B8  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80079A5C 000769BC  38 21 00 30 */	addi r1, r1, 0x30
/* 80079A60 000769C0  7C 08 03 A6 */	mtlr r0
/* 80079A64 000769C4  4E 80 00 20 */	blr 

.global __OSStopAudioSystem
__OSStopAudioSystem:
/* 80079A68 000769C8  7C 08 02 A6 */	mflr r0
/* 80079A6C 000769CC  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 80079A70 000769D0  90 01 00 04 */	stw r0, 4(r1)
/* 80079A74 000769D4  38 00 08 04 */	li r0, 0x804
/* 80079A78 000769D8  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 80079A7C 000769DC  93 E1 00 0C */	stw r31, 0xc(r1)
/* 80079A80 000769E0  3B E3 50 00 */	addi r31, r3, 0xCC005000@l
/* 80079A84 000769E4  38 63 50 00 */	addi r3, r3, 0x5000
/* 80079A88 000769E8  93 C1 00 08 */	stw r30, 8(r1)
/* 80079A8C 000769EC  B0 1F 00 0A */	sth r0, 0xa(r31)
/* 80079A90 000769F0  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 80079A94 000769F4  54 00 04 5E */	rlwinm r0, r0, 0, 0x11, 0xf
/* 80079A98 000769F8  B0 03 00 36 */	sth r0, 0x36(r3)
/* 80079A9C 000769FC  A4 1F 00 0A */	lhzu r0, 0xa(r31)
/* 80079AA0 00076A00  48 00 00 08 */	b lbl_80079AA8
lbl_80079AA4:
/* 80079AA4 00076A04  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_80079AA8:
/* 80079AA8 00076A08  54 00 05 6B */	rlwinm. r0, r0, 0, 0x15, 0x15
/* 80079AAC 00076A0C  40 82 FF F8 */	bne lbl_80079AA4
/* 80079AB0 00076A10  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079AB4 00076A14  48 00 00 08 */	b lbl_80079ABC
lbl_80079AB8:
/* 80079AB8 00076A18  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_80079ABC:
/* 80079ABC 00076A1C  54 00 05 AD */	rlwinm. r0, r0, 0, 0x16, 0x16
/* 80079AC0 00076A20  40 82 FF F8 */	bne lbl_80079AB8
/* 80079AC4 00076A24  38 00 08 AC */	li r0, 0x8ac
/* 80079AC8 00076A28  3C 60 CC 00 */	lis r3, 0xCC005000@ha
/* 80079ACC 00076A2C  B0 1F 00 00 */	sth r0, 0(r31)
/* 80079AD0 00076A30  38 00 00 00 */	li r0, 0
/* 80079AD4 00076A34  B0 03 50 00 */	sth r0, 0xCC005000@l(r3)
/* 80079AD8 00076A38  38 83 50 00 */	addi r4, r3, 0x5000
lbl_80079ADC:
/* 80079ADC 00076A3C  A0 64 00 04 */	lhz r3, 4(r4)
/* 80079AE0 00076A40  A0 04 00 06 */	lhz r0, 6(r4)
/* 80079AE4 00076A44  50 60 80 1E */	rlwimi r0, r3, 0x10, 0, 0xf
/* 80079AE8 00076A48  54 00 00 01 */	rlwinm. r0, r0, 0, 0, 0
/* 80079AEC 00076A4C  40 82 FF F0 */	bne lbl_80079ADC
/* 80079AF0 00076A50  48 00 5C 21 */	bl OSGetTick
/* 80079AF4 00076A54  7C 7E 1B 78 */	mr r30, r3
lbl_80079AF8:
/* 80079AF8 00076A58  48 00 5C 19 */	bl OSGetTick
/* 80079AFC 00076A5C  7C 1E 18 50 */	subf r0, r30, r3
/* 80079B00 00076A60  2C 00 00 2C */	cmpwi r0, 0x2c
/* 80079B04 00076A64  41 80 FF F4 */	blt lbl_80079AF8
/* 80079B08 00076A68  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079B0C 00076A6C  60 00 00 01 */	ori r0, r0, 1
/* 80079B10 00076A70  B0 1F 00 00 */	sth r0, 0(r31)
/* 80079B14 00076A74  A0 1F 00 00 */	lhz r0, 0(r31)
/* 80079B18 00076A78  48 00 00 08 */	b lbl_80079B20
lbl_80079B1C:
/* 80079B1C 00076A7C  A0 1F 00 00 */	lhz r0, 0(r31)
lbl_80079B20:
/* 80079B20 00076A80  54 00 07 FF */	clrlwi. r0, r0, 0x1f
/* 80079B24 00076A84  40 82 FF F8 */	bne lbl_80079B1C
/* 80079B28 00076A88  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80079B2C 00076A8C  83 E1 00 0C */	lwz r31, 0xc(r1)
/* 80079B30 00076A90  83 C1 00 08 */	lwz r30, 8(r1)
/* 80079B34 00076A94  38 21 00 10 */	addi r1, r1, 0x10
/* 80079B38 00076A98  7C 08 03 A6 */	mtlr r0
/* 80079B3C 00076A9C  4E 80 00 20 */	blr 
