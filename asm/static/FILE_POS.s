.include "macros.inc"

.section .text

.org 0x8009CBE4

.global fseek
fseek:
/* 8009CBE4 00099B44  94 21 FF F0 */	stwu r1, -0x10(r1)
/* 8009CBE8 00099B48  7C 08 02 A6 */	mflr r0
/* 8009CBEC 00099B4C  90 01 00 14 */	stw r0, 0x14(r1)
/* 8009CBF0 00099B50  48 00 00 15 */	bl _fseek
/* 8009CBF4 00099B54  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8009CBF8 00099B58  7C 08 03 A6 */	mtlr r0
/* 8009CBFC 00099B5C  38 21 00 10 */	addi r1, r1, 0x10
/* 8009CC00 00099B60  4E 80 00 20 */	blr 

.global _fseek
_fseek:
/* 8009CC04 00099B64  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8009CC08 00099B68  7C 08 02 A6 */	mflr r0
/* 8009CC0C 00099B6C  90 01 00 24 */	stw r0, 0x24(r1)
/* 8009CC10 00099B70  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 8009CC14 00099B74  7C BF 2B 78 */	mr r31, r5
/* 8009CC18 00099B78  93 C1 00 18 */	stw r30, 0x18(r1)
/* 8009CC1C 00099B7C  7C 7E 1B 78 */	mr r30, r3
/* 8009CC20 00099B80  90 81 00 08 */	stw r4, 8(r1)
/* 8009CC24 00099B84  A0 03 00 04 */	lhz r0, 4(r3)
/* 8009CC28 00099B88  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 8009CC2C 00099B8C  28 00 00 01 */	cmplwi r0, 1
/* 8009CC30 00099B90  40 82 00 10 */	bne lbl_8009CC40
/* 8009CC34 00099B94  88 1E 00 0A */	lbz r0, 0xa(r30)
/* 8009CC38 00099B98  28 00 00 00 */	cmplwi r0, 0
/* 8009CC3C 00099B9C  41 82 00 14 */	beq lbl_8009CC50
lbl_8009CC40:
/* 8009CC40 00099BA0  38 00 00 28 */	li r0, 0x28
/* 8009CC44 00099BA4  38 60 FF FF */	li r3, -1
/* 8009CC48 00099BA8  90 0D 90 38 */	stw r0, errno-_SDA_BASE_(r13)
/* 8009CC4C 00099BAC  48 00 01 DC */	b lbl_8009CE28
lbl_8009CC50:
/* 8009CC50 00099BB0  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CC54 00099BB4  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 8009CC58 00099BB8  28 00 00 01 */	cmplwi r0, 1
/* 8009CC5C 00099BBC  40 82 00 34 */	bne lbl_8009CC90
/* 8009CC60 00099BC0  38 80 00 00 */	li r4, 0
/* 8009CC64 00099BC4  4B FF F9 41 */	bl __flush_buffer
/* 8009CC68 00099BC8  2C 03 00 00 */	cmpwi r3, 0
/* 8009CC6C 00099BCC  41 82 00 24 */	beq lbl_8009CC90
/* 8009CC70 00099BD0  38 00 00 01 */	li r0, 1
/* 8009CC74 00099BD4  38 80 00 00 */	li r4, 0
/* 8009CC78 00099BD8  98 1E 00 0A */	stb r0, 0xa(r30)
/* 8009CC7C 00099BDC  38 00 00 28 */	li r0, 0x28
/* 8009CC80 00099BE0  38 60 FF FF */	li r3, -1
/* 8009CC84 00099BE4  90 9E 00 28 */	stw r4, 0x28(r30)
/* 8009CC88 00099BE8  90 0D 90 38 */	stw r0, errno-_SDA_BASE_(r13)
/* 8009CC8C 00099BEC  48 00 01 9C */	b lbl_8009CE28
lbl_8009CC90:
/* 8009CC90 00099BF0  2C 1F 00 01 */	cmpwi r31, 1
/* 8009CC94 00099BF4  40 82 00 80 */	bne lbl_8009CD14
/* 8009CC98 00099BF8  A0 1E 00 04 */	lhz r0, 4(r30)
/* 8009CC9C 00099BFC  3B E0 00 00 */	li r31, 0
/* 8009CCA0 00099C00  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 8009CCA4 00099C04  28 00 00 01 */	cmplwi r0, 1
/* 8009CCA8 00099C08  41 82 00 0C */	beq lbl_8009CCB4
/* 8009CCAC 00099C0C  28 00 00 02 */	cmplwi r0, 2
/* 8009CCB0 00099C10  40 82 00 10 */	bne lbl_8009CCC0
lbl_8009CCB4:
/* 8009CCB4 00099C14  88 1E 00 0A */	lbz r0, 0xa(r30)
/* 8009CCB8 00099C18  28 00 00 00 */	cmplwi r0, 0
/* 8009CCBC 00099C1C  41 82 00 14 */	beq lbl_8009CCD0
lbl_8009CCC0:
/* 8009CCC0 00099C20  38 00 00 28 */	li r0, 0x28
/* 8009CCC4 00099C24  38 60 FF FF */	li r3, -1
/* 8009CCC8 00099C28  90 0D 90 38 */	stw r0, errno-_SDA_BASE_(r13)
/* 8009CCCC 00099C2C  48 00 00 3C */	b lbl_8009CD08
lbl_8009CCD0:
/* 8009CCD0 00099C30  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CCD4 00099C34  54 05 DF 7F */	rlwinm. r5, r0, 0x1b, 0x1d, 0x1f
/* 8009CCD8 00099C38  40 82 00 0C */	bne lbl_8009CCE4
/* 8009CCDC 00099C3C  80 7E 00 18 */	lwz r3, 0x18(r30)
/* 8009CCE0 00099C40  48 00 00 28 */	b lbl_8009CD08
lbl_8009CCE4:
/* 8009CCE4 00099C44  80 7E 00 1C */	lwz r3, 0x1c(r30)
/* 8009CCE8 00099C48  28 05 00 03 */	cmplwi r5, 3
/* 8009CCEC 00099C4C  80 1E 00 24 */	lwz r0, 0x24(r30)
/* 8009CCF0 00099C50  80 9E 00 34 */	lwz r4, 0x34(r30)
/* 8009CCF4 00099C54  7C 03 00 50 */	subf r0, r3, r0
/* 8009CCF8 00099C58  7C 64 02 14 */	add r3, r4, r0
/* 8009CCFC 00099C5C  41 80 00 0C */	blt lbl_8009CD08
/* 8009CD00 00099C60  38 05 FF FE */	addi r0, r5, -2
/* 8009CD04 00099C64  7C 60 18 50 */	subf r3, r0, r3
lbl_8009CD08:
/* 8009CD08 00099C68  80 01 00 08 */	lwz r0, 8(r1)
/* 8009CD0C 00099C6C  7C 00 1A 14 */	add r0, r0, r3
/* 8009CD10 00099C70  90 01 00 08 */	stw r0, 8(r1)
lbl_8009CD14:
/* 8009CD14 00099C74  2C 1F 00 02 */	cmpwi r31, 2
/* 8009CD18 00099C78  41 82 00 90 */	beq lbl_8009CDA8
/* 8009CD1C 00099C7C  88 1E 00 04 */	lbz r0, 4(r30)
/* 8009CD20 00099C80  54 00 EF 7E */	rlwinm r0, r0, 0x1d, 0x1d, 0x1f
/* 8009CD24 00099C84  28 00 00 03 */	cmplwi r0, 3
/* 8009CD28 00099C88  41 82 00 80 */	beq lbl_8009CDA8
/* 8009CD2C 00099C8C  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CD30 00099C90  54 00 DF 7E */	rlwinm r0, r0, 0x1b, 0x1d, 0x1f
/* 8009CD34 00099C94  28 00 00 02 */	cmplwi r0, 2
/* 8009CD38 00099C98  41 82 00 0C */	beq lbl_8009CD44
/* 8009CD3C 00099C9C  28 00 00 03 */	cmplwi r0, 3
/* 8009CD40 00099CA0  40 82 00 68 */	bne lbl_8009CDA8
lbl_8009CD44:
/* 8009CD44 00099CA4  80 61 00 08 */	lwz r3, 8(r1)
/* 8009CD48 00099CA8  80 1E 00 18 */	lwz r0, 0x18(r30)
/* 8009CD4C 00099CAC  7C 03 00 40 */	cmplw r3, r0
/* 8009CD50 00099CB0  40 80 00 10 */	bge lbl_8009CD60
/* 8009CD54 00099CB4  80 1E 00 34 */	lwz r0, 0x34(r30)
/* 8009CD58 00099CB8  7C 03 00 40 */	cmplw r3, r0
/* 8009CD5C 00099CBC  40 80 00 18 */	bge lbl_8009CD74
lbl_8009CD60:
/* 8009CD60 00099CC0  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CD64 00099CC4  38 60 00 00 */	li r3, 0
/* 8009CD68 00099CC8  50 60 2E 34 */	rlwimi r0, r3, 5, 0x18, 0x1a
/* 8009CD6C 00099CCC  98 1E 00 08 */	stb r0, 8(r30)
/* 8009CD70 00099CD0  48 00 00 48 */	b lbl_8009CDB8
lbl_8009CD74:
/* 8009CD74 00099CD4  80 9E 00 1C */	lwz r4, 0x1c(r30)
/* 8009CD78 00099CD8  7C 00 18 50 */	subf r0, r0, r3
/* 8009CD7C 00099CDC  38 60 00 02 */	li r3, 2
/* 8009CD80 00099CE0  7C 04 02 14 */	add r0, r4, r0
/* 8009CD84 00099CE4  90 1E 00 24 */	stw r0, 0x24(r30)
/* 8009CD88 00099CE8  80 81 00 08 */	lwz r4, 8(r1)
/* 8009CD8C 00099CEC  80 1E 00 18 */	lwz r0, 0x18(r30)
/* 8009CD90 00099CF0  7C 04 00 50 */	subf r0, r4, r0
/* 8009CD94 00099CF4  90 1E 00 28 */	stw r0, 0x28(r30)
/* 8009CD98 00099CF8  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CD9C 00099CFC  50 60 2E 34 */	rlwimi r0, r3, 5, 0x18, 0x1a
/* 8009CDA0 00099D00  98 1E 00 08 */	stb r0, 8(r30)
/* 8009CDA4 00099D04  48 00 00 14 */	b lbl_8009CDB8
lbl_8009CDA8:
/* 8009CDA8 00099D08  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CDAC 00099D0C  38 60 00 00 */	li r3, 0
/* 8009CDB0 00099D10  50 60 2E 34 */	rlwimi r0, r3, 5, 0x18, 0x1a
/* 8009CDB4 00099D14  98 1E 00 08 */	stb r0, 8(r30)
lbl_8009CDB8:
/* 8009CDB8 00099D18  88 1E 00 08 */	lbz r0, 8(r30)
/* 8009CDBC 00099D1C  54 00 DF 7F */	rlwinm. r0, r0, 0x1b, 0x1d, 0x1f
/* 8009CDC0 00099D20  40 82 00 64 */	bne lbl_8009CE24
/* 8009CDC4 00099D24  81 9E 00 38 */	lwz r12, 0x38(r30)
/* 8009CDC8 00099D28  28 0C 00 00 */	cmplwi r12, 0
/* 8009CDCC 00099D2C  41 82 00 44 */	beq lbl_8009CE10
/* 8009CDD0 00099D30  7F E5 FB 78 */	mr r5, r31
/* 8009CDD4 00099D34  38 81 00 08 */	addi r4, r1, 8
/* 8009CDD8 00099D38  80 7E 00 00 */	lwz r3, 0(r30)
/* 8009CDDC 00099D3C  80 DE 00 48 */	lwz r6, 0x48(r30)
/* 8009CDE0 00099D40  7D 89 03 A6 */	mtctr r12
/* 8009CDE4 00099D44  4E 80 04 21 */	bctrl 
/* 8009CDE8 00099D48  2C 03 00 00 */	cmpwi r3, 0
/* 8009CDEC 00099D4C  41 82 00 24 */	beq lbl_8009CE10
/* 8009CDF0 00099D50  38 00 00 01 */	li r0, 1
/* 8009CDF4 00099D54  38 80 00 00 */	li r4, 0
/* 8009CDF8 00099D58  98 1E 00 0A */	stb r0, 0xa(r30)
/* 8009CDFC 00099D5C  38 00 00 28 */	li r0, 0x28
/* 8009CE00 00099D60  38 60 FF FF */	li r3, -1
/* 8009CE04 00099D64  90 9E 00 28 */	stw r4, 0x28(r30)
/* 8009CE08 00099D68  90 0D 90 38 */	stw r0, errno-_SDA_BASE_(r13)
/* 8009CE0C 00099D6C  48 00 00 1C */	b lbl_8009CE28
lbl_8009CE10:
/* 8009CE10 00099D70  38 60 00 00 */	li r3, 0
/* 8009CE14 00099D74  98 7E 00 09 */	stb r3, 9(r30)
/* 8009CE18 00099D78  80 01 00 08 */	lwz r0, 8(r1)
/* 8009CE1C 00099D7C  90 1E 00 18 */	stw r0, 0x18(r30)
/* 8009CE20 00099D80  90 7E 00 28 */	stw r3, 0x28(r30)
lbl_8009CE24:
/* 8009CE24 00099D84  38 60 00 00 */	li r3, 0
lbl_8009CE28:
/* 8009CE28 00099D88  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8009CE2C 00099D8C  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 8009CE30 00099D90  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8009CE34 00099D94  7C 08 03 A6 */	mtlr r0
/* 8009CE38 00099D98  38 21 00 20 */	addi r1, r1, 0x20
/* 8009CE3C 00099D9C  4E 80 00 20 */	blr 

.global ftell
ftell:
/* 8009CE40 00099DA0  A0 03 00 04 */	lhz r0, 4(r3)
/* 8009CE44 00099DA4  54 00 D7 7E */	rlwinm r0, r0, 0x1a, 0x1d, 0x1f
/* 8009CE48 00099DA8  28 00 00 01 */	cmplwi r0, 1
/* 8009CE4C 00099DAC  41 82 00 0C */	beq lbl_8009CE58
/* 8009CE50 00099DB0  28 00 00 02 */	cmplwi r0, 2
/* 8009CE54 00099DB4  40 82 00 10 */	bne lbl_8009CE64
lbl_8009CE58:
/* 8009CE58 00099DB8  88 03 00 0A */	lbz r0, 0xa(r3)
/* 8009CE5C 00099DBC  28 00 00 00 */	cmplwi r0, 0
/* 8009CE60 00099DC0  41 82 00 14 */	beq lbl_8009CE74
lbl_8009CE64:
/* 8009CE64 00099DC4  38 00 00 28 */	li r0, 0x28
/* 8009CE68 00099DC8  38 60 FF FF */	li r3, -1
/* 8009CE6C 00099DCC  90 0D 90 38 */	stw r0, errno-_SDA_BASE_(r13)
/* 8009CE70 00099DD0  4E 80 00 20 */	blr 
lbl_8009CE74:
/* 8009CE74 00099DD4  88 03 00 08 */	lbz r0, 8(r3)
/* 8009CE78 00099DD8  54 05 DF 7F */	rlwinm. r5, r0, 0x1b, 0x1d, 0x1f
/* 8009CE7C 00099DDC  40 82 00 0C */	bne lbl_8009CE88
/* 8009CE80 00099DE0  80 63 00 18 */	lwz r3, 0x18(r3)
/* 8009CE84 00099DE4  4E 80 00 20 */	blr 
lbl_8009CE88:
/* 8009CE88 00099DE8  80 83 00 1C */	lwz r4, 0x1c(r3)
/* 8009CE8C 00099DEC  28 05 00 03 */	cmplwi r5, 3
/* 8009CE90 00099DF0  80 03 00 24 */	lwz r0, 0x24(r3)
/* 8009CE94 00099DF4  80 63 00 34 */	lwz r3, 0x34(r3)
/* 8009CE98 00099DF8  7C 04 00 50 */	subf r0, r4, r0
/* 8009CE9C 00099DFC  7C 63 02 14 */	add r3, r3, r0
/* 8009CEA0 00099E00  4D 80 00 20 */	bltlr 
/* 8009CEA4 00099E04  38 05 FF FE */	addi r0, r5, -2
/* 8009CEA8 00099E08  7C 60 18 50 */	subf r3, r0, r3
/* 8009CEAC 00099E0C  4E 80 00 20 */	blr 
