.include "macros.inc"

.section .text

.org 0x8008FDCC

.global IsCard
IsCard:
/* 8008FDCC 0008CD2C  54 60 00 1F */	rlwinm. r0, r3, 0, 0, 0xf
/* 8008FDD0 0008CD30  41 82 00 24 */	beq lbl_8008FDF4
/* 8008FDD4 0008CD34  3C 03 80 00 */	addis r0, r3, 0x8000
/* 8008FDD8 0008CD38  28 00 00 04 */	cmplwi r0, 4
/* 8008FDDC 0008CD3C  40 82 00 10 */	bne lbl_8008FDEC
/* 8008FDE0 0008CD40  A0 0D 86 70 */	lhz r0, __CARDVendorID-_SDA_BASE_(r13)
/* 8008FDE4 0008CD44  28 00 FF FF */	cmplwi r0, 0xffff
/* 8008FDE8 0008CD48  40 82 00 0C */	bne lbl_8008FDF4
lbl_8008FDEC:
/* 8008FDEC 0008CD4C  38 60 00 00 */	li r3, 0
/* 8008FDF0 0008CD50  4E 80 00 20 */	blr 
lbl_8008FDF4:
/* 8008FDF4 0008CD54  54 60 07 BF */	clrlwi. r0, r3, 0x1e
/* 8008FDF8 0008CD58  41 82 00 0C */	beq lbl_8008FE04
/* 8008FDFC 0008CD5C  38 60 00 00 */	li r3, 0
/* 8008FE00 0008CD60  4E 80 00 20 */	blr 
lbl_8008FE04:
/* 8008FE04 0008CD64  54 65 06 3A */	rlwinm r5, r3, 0, 0x18, 0x1d
/* 8008FE08 0008CD68  2C 05 00 20 */	cmpwi r5, 0x20
/* 8008FE0C 0008CD6C  41 82 00 48 */	beq lbl_8008FE54
/* 8008FE10 0008CD70  40 80 00 28 */	bge lbl_8008FE38
/* 8008FE14 0008CD74  2C 05 00 08 */	cmpwi r5, 8
/* 8008FE18 0008CD78  41 82 00 3C */	beq lbl_8008FE54
/* 8008FE1C 0008CD7C  40 80 00 10 */	bge lbl_8008FE2C
/* 8008FE20 0008CD80  2C 05 00 04 */	cmpwi r5, 4
/* 8008FE24 0008CD84  41 82 00 30 */	beq lbl_8008FE54
/* 8008FE28 0008CD88  48 00 00 24 */	b lbl_8008FE4C
lbl_8008FE2C:
/* 8008FE2C 0008CD8C  2C 05 00 10 */	cmpwi r5, 0x10
/* 8008FE30 0008CD90  41 82 00 24 */	beq lbl_8008FE54
/* 8008FE34 0008CD94  48 00 00 18 */	b lbl_8008FE4C
lbl_8008FE38:
/* 8008FE38 0008CD98  2C 05 00 80 */	cmpwi r5, 0x80
/* 8008FE3C 0008CD9C  41 82 00 18 */	beq lbl_8008FE54
/* 8008FE40 0008CDA0  40 80 00 0C */	bge lbl_8008FE4C
/* 8008FE44 0008CDA4  2C 05 00 40 */	cmpwi r5, 0x40
/* 8008FE48 0008CDA8  41 82 00 0C */	beq lbl_8008FE54
lbl_8008FE4C:
/* 8008FE4C 0008CDAC  38 60 00 00 */	li r3, 0
/* 8008FE50 0008CDB0  4E 80 00 20 */	blr 
lbl_8008FE54:
/* 8008FE54 0008CDB4  3C 80 80 0E */	lis r4, SectorSizeTable@ha
/* 8008FE58 0008CDB8  54 63 BE FA */	rlwinm r3, r3, 0x17, 0x1b, 0x1d
/* 8008FE5C 0008CDBC  38 04 14 50 */	addi r0, r4, SectorSizeTable@l
/* 8008FE60 0008CDC0  7C 60 1A 14 */	add r3, r0, r3
/* 8008FE64 0008CDC4  80 63 00 00 */	lwz r3, 0(r3)
/* 8008FE68 0008CDC8  2C 03 00 00 */	cmpwi r3, 0
/* 8008FE6C 0008CDCC  40 82 00 0C */	bne lbl_8008FE78
/* 8008FE70 0008CDD0  38 60 00 00 */	li r3, 0
/* 8008FE74 0008CDD4  4E 80 00 20 */	blr 
lbl_8008FE78:
/* 8008FE78 0008CDD8  54 A0 88 DC */	rlwinm r0, r5, 0x11, 3, 0xe
/* 8008FE7C 0008CDDC  7C 00 1B 96 */	divwu r0, r0, r3
/* 8008FE80 0008CDE0  28 00 00 08 */	cmplwi r0, 8
/* 8008FE84 0008CDE4  40 80 00 0C */	bge lbl_8008FE90
/* 8008FE88 0008CDE8  38 60 00 00 */	li r3, 0
/* 8008FE8C 0008CDEC  4E 80 00 20 */	blr 
lbl_8008FE90:
/* 8008FE90 0008CDF0  38 60 00 01 */	li r3, 1
/* 8008FE94 0008CDF4  4E 80 00 20 */	blr 

.global CARDProbeEx
CARDProbeEx:
/* 8008FE98 0008CDF8  7C 08 02 A6 */	mflr r0
/* 8008FE9C 0008CDFC  90 01 00 04 */	stw r0, 4(r1)
/* 8008FEA0 0008CE00  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8008FEA4 0008CE04  BF 61 00 1C */	stmw r27, 0x1c(r1)
/* 8008FEA8 0008CE08  7C 7B 1B 79 */	or. r27, r3, r3
/* 8008FEAC 0008CE0C  3B 84 00 00 */	addi r28, r4, 0
/* 8008FEB0 0008CE10  3B E5 00 00 */	addi r31, r5, 0
/* 8008FEB4 0008CE14  41 80 00 0C */	blt lbl_8008FEC0
/* 8008FEB8 0008CE18  2C 1B 00 02 */	cmpwi r27, 2
/* 8008FEBC 0008CE1C  41 80 00 0C */	blt lbl_8008FEC8
lbl_8008FEC0:
/* 8008FEC0 0008CE20  38 60 FF 80 */	li r3, -128
/* 8008FEC4 0008CE24  48 00 01 3C */	b lbl_80090000
lbl_8008FEC8:
/* 8008FEC8 0008CE28  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 8008FECC 0008CE2C  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 8008FED0 0008CE30  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 8008FED4 0008CE34  41 82 00 0C */	beq lbl_8008FEE0
/* 8008FED8 0008CE38  38 60 FF FD */	li r3, -3
/* 8008FEDC 0008CE3C  48 00 01 24 */	b lbl_80090000
lbl_8008FEE0:
/* 8008FEE0 0008CE40  1C 9B 01 10 */	mulli r4, r27, 0x110
/* 8008FEE4 0008CE44  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 8008FEE8 0008CE48  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 8008FEEC 0008CE4C  7F C0 22 14 */	add r30, r0, r4
/* 8008FEF0 0008CE50  4B FE AD 35 */	bl OSDisableInterrupts
/* 8008FEF4 0008CE54  3B A3 00 00 */	addi r29, r3, 0
/* 8008FEF8 0008CE58  38 7B 00 00 */	addi r3, r27, 0
/* 8008FEFC 0008CE5C  4B FF 09 61 */	bl EXIProbeEx
/* 8008FF00 0008CE60  2C 03 FF FF */	cmpwi r3, -1
/* 8008FF04 0008CE64  40 82 00 0C */	bne lbl_8008FF10
/* 8008FF08 0008CE68  3B C0 FF FD */	li r30, -3
/* 8008FF0C 0008CE6C  48 00 00 E8 */	b lbl_8008FFF4
lbl_8008FF10:
/* 8008FF10 0008CE70  2C 03 00 00 */	cmpwi r3, 0
/* 8008FF14 0008CE74  40 82 00 0C */	bne lbl_8008FF20
/* 8008FF18 0008CE78  3B C0 FF FF */	li r30, -1
/* 8008FF1C 0008CE7C  48 00 00 D8 */	b lbl_8008FFF4
lbl_8008FF20:
/* 8008FF20 0008CE80  80 1E 00 00 */	lwz r0, 0(r30)
/* 8008FF24 0008CE84  2C 00 00 00 */	cmpwi r0, 0
/* 8008FF28 0008CE88  41 82 00 40 */	beq lbl_8008FF68
/* 8008FF2C 0008CE8C  80 1E 00 24 */	lwz r0, 0x24(r30)
/* 8008FF30 0008CE90  2C 00 00 01 */	cmpwi r0, 1
/* 8008FF34 0008CE94  40 80 00 0C */	bge lbl_8008FF40
/* 8008FF38 0008CE98  3B C0 FF FF */	li r30, -1
/* 8008FF3C 0008CE9C  48 00 00 B8 */	b lbl_8008FFF4
lbl_8008FF40:
/* 8008FF40 0008CEA0  28 1C 00 00 */	cmplwi r28, 0
/* 8008FF44 0008CEA4  41 82 00 0C */	beq lbl_8008FF50
/* 8008FF48 0008CEA8  A0 1E 00 08 */	lhz r0, 8(r30)
/* 8008FF4C 0008CEAC  90 1C 00 00 */	stw r0, 0(r28)
lbl_8008FF50:
/* 8008FF50 0008CEB0  28 1F 00 00 */	cmplwi r31, 0
/* 8008FF54 0008CEB4  41 82 00 0C */	beq lbl_8008FF60
/* 8008FF58 0008CEB8  80 1E 00 0C */	lwz r0, 0xc(r30)
/* 8008FF5C 0008CEBC  90 1F 00 00 */	stw r0, 0(r31)
lbl_8008FF60:
/* 8008FF60 0008CEC0  3B C0 00 00 */	li r30, 0
/* 8008FF64 0008CEC4  48 00 00 90 */	b lbl_8008FFF4
lbl_8008FF68:
/* 8008FF68 0008CEC8  7F 63 DB 78 */	mr r3, r27
/* 8008FF6C 0008CECC  4B FF 14 3D */	bl EXIGetState
/* 8008FF70 0008CED0  54 60 07 39 */	rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 8008FF74 0008CED4  41 82 00 0C */	beq lbl_8008FF80
/* 8008FF78 0008CED8  3B C0 FF FE */	li r30, -2
/* 8008FF7C 0008CEDC  48 00 00 78 */	b lbl_8008FFF4
lbl_8008FF80:
/* 8008FF80 0008CEE0  38 7B 00 00 */	addi r3, r27, 0
/* 8008FF84 0008CEE4  38 A1 00 14 */	addi r5, r1, 0x14
/* 8008FF88 0008CEE8  38 80 00 00 */	li r4, 0
/* 8008FF8C 0008CEEC  4B FF 14 5D */	bl EXIGetID
/* 8008FF90 0008CEF0  2C 03 00 00 */	cmpwi r3, 0
/* 8008FF94 0008CEF4  40 82 00 0C */	bne lbl_8008FFA0
/* 8008FF98 0008CEF8  3B C0 FF FF */	li r30, -1
/* 8008FF9C 0008CEFC  48 00 00 58 */	b lbl_8008FFF4
lbl_8008FFA0:
/* 8008FFA0 0008CF00  80 61 00 14 */	lwz r3, 0x14(r1)
/* 8008FFA4 0008CF04  4B FF FE 29 */	bl IsCard
/* 8008FFA8 0008CF08  2C 03 00 00 */	cmpwi r3, 0
/* 8008FFAC 0008CF0C  41 82 00 44 */	beq lbl_8008FFF0
/* 8008FFB0 0008CF10  28 1C 00 00 */	cmplwi r28, 0
/* 8008FFB4 0008CF14  41 82 00 10 */	beq lbl_8008FFC4
/* 8008FFB8 0008CF18  80 01 00 14 */	lwz r0, 0x14(r1)
/* 8008FFBC 0008CF1C  54 00 06 3A */	rlwinm r0, r0, 0, 0x18, 0x1d
/* 8008FFC0 0008CF20  90 1C 00 00 */	stw r0, 0(r28)
lbl_8008FFC4:
/* 8008FFC4 0008CF24  28 1F 00 00 */	cmplwi r31, 0
/* 8008FFC8 0008CF28  41 82 00 20 */	beq lbl_8008FFE8
/* 8008FFCC 0008CF2C  80 81 00 14 */	lwz r4, 0x14(r1)
/* 8008FFD0 0008CF30  3C 60 80 0E */	lis r3, SectorSizeTable@ha
/* 8008FFD4 0008CF34  38 03 14 50 */	addi r0, r3, SectorSizeTable@l
/* 8008FFD8 0008CF38  54 83 BE FA */	rlwinm r3, r4, 0x17, 0x1b, 0x1d
/* 8008FFDC 0008CF3C  7C 60 1A 14 */	add r3, r0, r3
/* 8008FFE0 0008CF40  80 03 00 00 */	lwz r0, 0(r3)
/* 8008FFE4 0008CF44  90 1F 00 00 */	stw r0, 0(r31)
lbl_8008FFE8:
/* 8008FFE8 0008CF48  3B C0 00 00 */	li r30, 0
/* 8008FFEC 0008CF4C  48 00 00 08 */	b lbl_8008FFF4
lbl_8008FFF0:
/* 8008FFF0 0008CF50  3B C0 FF FE */	li r30, -2
lbl_8008FFF4:
/* 8008FFF4 0008CF54  7F A3 EB 78 */	mr r3, r29
/* 8008FFF8 0008CF58  4B FE AC 55 */	bl OSRestoreInterrupts
/* 8008FFFC 0008CF5C  7F C3 F3 78 */	mr r3, r30
lbl_80090000:
/* 80090000 0008CF60  BB 61 00 1C */	lmw r27, 0x1c(r1)
/* 80090004 0008CF64  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80090008 0008CF68  38 21 00 30 */	addi r1, r1, 0x30
/* 8009000C 0008CF6C  7C 08 03 A6 */	mtlr r0
/* 80090010 0008CF70  4E 80 00 20 */	blr 

.global DoMount
DoMount:
/* 80090014 0008CF74  7C 08 02 A6 */	mflr r0
/* 80090018 0008CF78  90 01 00 04 */	stw r0, 4(r1)
/* 8009001C 0008CF7C  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80090020 0008CF80  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 80090024 0008CF84  93 C1 00 28 */	stw r30, 0x28(r1)
/* 80090028 0008CF88  93 A1 00 24 */	stw r29, 0x24(r1)
/* 8009002C 0008CF8C  3B A3 00 00 */	addi r29, r3, 0
/* 80090030 0008CF90  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 80090034 0008CF94  93 81 00 20 */	stw r28, 0x20(r1)
/* 80090038 0008CF98  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 8009003C 0008CF9C  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 80090040 0008CFA0  7C 60 22 14 */	add r3, r0, r4
/* 80090044 0008CFA4  80 03 00 24 */	lwz r0, 0x24(r3)
/* 80090048 0008CFA8  3B E3 00 00 */	addi r31, r3, 0
/* 8009004C 0008CFAC  2C 00 00 00 */	cmpwi r0, 0
/* 80090050 0008CFB0  40 82 02 AC */	bne lbl_800902FC
/* 80090054 0008CFB4  38 7D 00 00 */	addi r3, r29, 0
/* 80090058 0008CFB8  38 A1 00 18 */	addi r5, r1, 0x18
/* 8009005C 0008CFBC  38 80 00 00 */	li r4, 0
/* 80090060 0008CFC0  4B FF 13 89 */	bl EXIGetID
/* 80090064 0008CFC4  2C 03 00 00 */	cmpwi r3, 0
/* 80090068 0008CFC8  40 82 00 0C */	bne lbl_80090074
/* 8009006C 0008CFCC  3B C0 FF FD */	li r30, -3
/* 80090070 0008CFD0  48 00 00 20 */	b lbl_80090090
lbl_80090074:
/* 80090074 0008CFD4  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80090078 0008CFD8  4B FF FD 55 */	bl IsCard
/* 8009007C 0008CFDC  2C 03 00 00 */	cmpwi r3, 0
/* 80090080 0008CFE0  41 82 00 0C */	beq lbl_8009008C
/* 80090084 0008CFE4  3B C0 00 00 */	li r30, 0
/* 80090088 0008CFE8  48 00 00 08 */	b lbl_80090090
lbl_8009008C:
/* 8009008C 0008CFEC  3B C0 FF FE */	li r30, -2
lbl_80090090:
/* 80090090 0008CFF0  2C 1E 00 00 */	cmpwi r30, 0
/* 80090094 0008CFF4  41 80 03 44 */	blt lbl_800903D8
/* 80090098 0008CFF8  80 01 00 18 */	lwz r0, 0x18(r1)
/* 8009009C 0008CFFC  3C 80 80 0E */	lis r4, SectorSizeTable@ha
/* 800900A0 0008D000  38 84 14 50 */	addi r4, r4, SectorSizeTable@l
/* 800900A4 0008D004  90 1F 01 08 */	stw r0, 0x108(r31)
/* 800900A8 0008D008  3C 60 80 0E */	lis r3, LatencyTable@ha
/* 800900AC 0008D00C  38 03 14 70 */	addi r0, r3, LatencyTable@l
/* 800900B0 0008D010  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 800900B4 0008D014  38 7D 00 00 */	addi r3, r29, 0
/* 800900B8 0008D018  54 A5 06 3A */	rlwinm r5, r5, 0, 0x18, 0x1d
/* 800900BC 0008D01C  B0 BF 00 08 */	sth r5, 8(r31)
/* 800900C0 0008D020  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 800900C4 0008D024  54 A5 BE FA */	rlwinm r5, r5, 0x17, 0x1b, 0x1d
/* 800900C8 0008D028  7C 84 2A 14 */	add r4, r4, r5
/* 800900CC 0008D02C  80 84 00 00 */	lwz r4, 0(r4)
/* 800900D0 0008D030  90 9F 00 0C */	stw r4, 0xc(r31)
/* 800900D4 0008D034  A0 BF 00 08 */	lhz r5, 8(r31)
/* 800900D8 0008D038  80 9F 00 0C */	lwz r4, 0xc(r31)
/* 800900DC 0008D03C  54 A5 A0 16 */	slwi r5, r5, 0x14
/* 800900E0 0008D040  7C A5 1E 70 */	srawi r5, r5, 3
/* 800900E4 0008D044  7C A5 01 94 */	addze r5, r5
/* 800900E8 0008D048  7C 85 23 D6 */	divw r4, r5, r4
/* 800900EC 0008D04C  B0 9F 00 10 */	sth r4, 0x10(r31)
/* 800900F0 0008D050  80 81 00 18 */	lwz r4, 0x18(r1)
/* 800900F4 0008D054  54 84 D6 FA */	rlwinm r4, r4, 0x1a, 0x1b, 0x1d
/* 800900F8 0008D058  7C 80 22 14 */	add r4, r0, r4
/* 800900FC 0008D05C  80 04 00 00 */	lwz r0, 0(r4)
/* 80090100 0008D060  90 1F 00 14 */	stw r0, 0x14(r31)
/* 80090104 0008D064  4B FF D6 05 */	bl __CARDClearStatus
/* 80090108 0008D068  7C 7E 1B 79 */	or. r30, r3, r3
/* 8009010C 0008D06C  41 80 02 CC */	blt lbl_800903D8
/* 80090110 0008D070  38 7D 00 00 */	addi r3, r29, 0
/* 80090114 0008D074  38 81 00 14 */	addi r4, r1, 0x14
/* 80090118 0008D078  4B FF D5 01 */	bl __CARDReadStatus
/* 8009011C 0008D07C  7C 7E 1B 79 */	or. r30, r3, r3
/* 80090120 0008D080  41 80 02 B8 */	blt lbl_800903D8
/* 80090124 0008D084  7F A3 EB 78 */	mr r3, r29
/* 80090128 0008D088  4B FF 06 B5 */	bl EXIProbe
/* 8009012C 0008D08C  2C 03 00 00 */	cmpwi r3, 0
/* 80090130 0008D090  40 82 00 0C */	bne lbl_8009013C
/* 80090134 0008D094  3B C0 FF FD */	li r30, -3
/* 80090138 0008D098  48 00 02 A0 */	b lbl_800903D8
lbl_8009013C:
/* 8009013C 0008D09C  88 01 00 14 */	lbz r0, 0x14(r1)
/* 80090140 0008D0A0  54 00 06 73 */	rlwinm. r0, r0, 0, 0x19, 0x19
/* 80090144 0008D0A4  40 82 01 14 */	bne lbl_80090258
/* 80090148 0008D0A8  38 7D 00 00 */	addi r3, r29, 0
/* 8009014C 0008D0AC  38 9F 00 18 */	addi r4, r31, 0x18
/* 80090150 0008D0B0  4B F9 D4 51 */	bl __CARDUnlock
/* 80090154 0008D0B4  7C 7E 1B 79 */	or. r30, r3, r3
/* 80090158 0008D0B8  41 80 02 80 */	blt lbl_800903D8
/* 8009015C 0008D0BC  4B FE D1 FD */	bl __OSLockSramEx
/* 80090160 0008D0C0  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80090164 0008D0C4  7C 83 02 14 */	add r4, r3, r0
/* 80090168 0008D0C8  88 1F 00 18 */	lbz r0, 0x18(r31)
/* 8009016C 0008D0CC  38 BF 00 18 */	addi r5, r31, 0x18
/* 80090170 0008D0D0  98 04 00 00 */	stb r0, 0(r4)
/* 80090174 0008D0D4  39 05 00 02 */	addi r8, r5, 2
/* 80090178 0008D0D8  39 25 00 03 */	addi r9, r5, 3
/* 8009017C 0008D0DC  88 FF 00 18 */	lbz r7, 0x18(r31)
/* 80090180 0008D0E0  39 45 00 04 */	addi r10, r5, 4
/* 80090184 0008D0E4  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 80090188 0008D0E8  39 65 00 05 */	addi r11, r5, 5
/* 8009018C 0008D0EC  39 85 00 06 */	addi r12, r5, 6
/* 80090190 0008D0F0  98 04 00 01 */	stb r0, 1(r4)
/* 80090194 0008D0F4  3B 85 00 07 */	addi r28, r5, 7
/* 80090198 0008D0F8  38 A0 00 08 */	li r5, 8
/* 8009019C 0008D0FC  88 1F 00 19 */	lbz r0, 0x19(r31)
/* 800901A0 0008D100  88 C8 00 00 */	lbz r6, 0(r8)
/* 800901A4 0008D104  7C 07 02 14 */	add r0, r7, r0
/* 800901A8 0008D108  98 C4 00 02 */	stb r6, 2(r4)
/* 800901AC 0008D10C  88 E8 00 00 */	lbz r7, 0(r8)
/* 800901B0 0008D110  88 C9 00 00 */	lbz r6, 0(r9)
/* 800901B4 0008D114  7C 00 3A 14 */	add r0, r0, r7
/* 800901B8 0008D118  98 C4 00 03 */	stb r6, 3(r4)
/* 800901BC 0008D11C  88 E9 00 00 */	lbz r7, 0(r9)
/* 800901C0 0008D120  88 CA 00 00 */	lbz r6, 0(r10)
/* 800901C4 0008D124  7C 00 3A 14 */	add r0, r0, r7
/* 800901C8 0008D128  98 C4 00 04 */	stb r6, 4(r4)
/* 800901CC 0008D12C  88 EA 00 00 */	lbz r7, 0(r10)
/* 800901D0 0008D130  88 CB 00 00 */	lbz r6, 0(r11)
/* 800901D4 0008D134  7C 00 3A 14 */	add r0, r0, r7
/* 800901D8 0008D138  98 C4 00 05 */	stb r6, 5(r4)
/* 800901DC 0008D13C  88 EB 00 00 */	lbz r7, 0(r11)
/* 800901E0 0008D140  88 CC 00 00 */	lbz r6, 0(r12)
/* 800901E4 0008D144  7C 00 3A 14 */	add r0, r0, r7
/* 800901E8 0008D148  98 C4 00 06 */	stb r6, 6(r4)
/* 800901EC 0008D14C  88 EC 00 00 */	lbz r7, 0(r12)
/* 800901F0 0008D150  88 DC 00 00 */	lbz r6, 0(r28)
/* 800901F4 0008D154  7C 00 3A 14 */	add r0, r0, r7
/* 800901F8 0008D158  98 C4 00 07 */	stb r6, 7(r4)
/* 800901FC 0008D15C  88 DC 00 00 */	lbz r6, 0(r28)
/* 80090200 0008D160  7C 00 32 14 */	add r0, r0, r6
/* 80090204 0008D164  48 00 01 F0 */	b lbl_800903F4
lbl_80090208:
/* 80090208 0008D168  20 85 00 0C */	subfic r4, r5, 0xc
/* 8009020C 0008D16C  2C 05 00 0C */	cmpwi r5, 0xc
/* 80090210 0008D170  7C 89 03 A6 */	mtctr r4
/* 80090214 0008D174  40 80 00 28 */	bge lbl_8009023C
lbl_80090218:
/* 80090218 0008D178  38 E5 00 18 */	addi r7, r5, 0x18
/* 8009021C 0008D17C  7C FF 3A 14 */	add r7, r31, r7
/* 80090220 0008D180  88 87 00 00 */	lbz r4, 0(r7)
/* 80090224 0008D184  38 A5 00 01 */	addi r5, r5, 1
/* 80090228 0008D188  98 86 00 00 */	stb r4, 0(r6)
/* 8009022C 0008D18C  38 C6 00 01 */	addi r6, r6, 1
/* 80090230 0008D190  88 87 00 00 */	lbz r4, 0(r7)
/* 80090234 0008D194  7C 00 22 14 */	add r0, r0, r4
/* 80090238 0008D198  42 00 FF E0 */	bdnz lbl_80090218
lbl_8009023C:
/* 8009023C 0008D19C  7C 63 EA 14 */	add r3, r3, r29
/* 80090240 0008D1A0  7C 00 00 F8 */	nor r0, r0, r0
/* 80090244 0008D1A4  98 03 00 26 */	stb r0, 0x26(r3)
/* 80090248 0008D1A8  38 60 00 01 */	li r3, 1
/* 8009024C 0008D1AC  4B FE D4 95 */	bl __OSUnlockSramEx
/* 80090250 0008D1B0  7F C3 F3 78 */	mr r3, r30
/* 80090254 0008D1B4  48 00 01 B0 */	b lbl_80090404
lbl_80090258:
/* 80090258 0008D1B8  38 00 00 01 */	li r0, 1
/* 8009025C 0008D1BC  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80090260 0008D1C0  4B FE D0 F9 */	bl __OSLockSramEx
/* 80090264 0008D1C4  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80090268 0008D1C8  3B C3 00 00 */	addi r30, r3, 0
/* 8009026C 0008D1CC  7C BE 02 14 */	add r5, r30, r0
/* 80090270 0008D1D0  88 85 00 00 */	lbz r4, 0(r5)
/* 80090274 0008D1D4  38 C0 00 08 */	li r6, 8
/* 80090278 0008D1D8  88 05 00 01 */	lbz r0, 1(r5)
/* 8009027C 0008D1DC  88 65 00 02 */	lbz r3, 2(r5)
/* 80090280 0008D1E0  7F 84 02 14 */	add r28, r4, r0
/* 80090284 0008D1E4  88 05 00 03 */	lbz r0, 3(r5)
/* 80090288 0008D1E8  7F 9C 1A 14 */	add r28, r28, r3
/* 8009028C 0008D1EC  88 65 00 04 */	lbz r3, 4(r5)
/* 80090290 0008D1F0  7F 9C 02 14 */	add r28, r28, r0
/* 80090294 0008D1F4  88 05 00 05 */	lbz r0, 5(r5)
/* 80090298 0008D1F8  7F 9C 1A 14 */	add r28, r28, r3
/* 8009029C 0008D1FC  88 65 00 06 */	lbz r3, 6(r5)
/* 800902A0 0008D200  7F 9C 02 14 */	add r28, r28, r0
/* 800902A4 0008D204  88 05 00 07 */	lbz r0, 7(r5)
/* 800902A8 0008D208  7F 9C 1A 14 */	add r28, r28, r3
/* 800902AC 0008D20C  7F 9C 02 14 */	add r28, r28, r0
/* 800902B0 0008D210  48 00 01 4C */	b lbl_800903FC
lbl_800902B4:
/* 800902B4 0008D214  20 06 00 0C */	subfic r0, r6, 0xc
/* 800902B8 0008D218  2C 06 00 0C */	cmpwi r6, 0xc
/* 800902BC 0008D21C  7C 09 03 A6 */	mtctr r0
/* 800902C0 0008D220  40 80 00 14 */	bge lbl_800902D4
lbl_800902C4:
/* 800902C4 0008D224  88 03 00 00 */	lbz r0, 0(r3)
/* 800902C8 0008D228  38 63 00 01 */	addi r3, r3, 1
/* 800902CC 0008D22C  7F 9C 02 14 */	add r28, r28, r0
/* 800902D0 0008D230  42 00 FF F4 */	bdnz lbl_800902C4
lbl_800902D4:
/* 800902D4 0008D234  38 60 00 00 */	li r3, 0
/* 800902D8 0008D238  4B FE D4 09 */	bl __OSUnlockSramEx
/* 800902DC 0008D23C  7C 7E EA 14 */	add r3, r30, r29
/* 800902E0 0008D240  7F 80 E0 F8 */	nor r0, r28, r28
/* 800902E4 0008D244  88 63 00 26 */	lbz r3, 0x26(r3)
/* 800902E8 0008D248  54 00 06 3E */	clrlwi r0, r0, 0x18
/* 800902EC 0008D24C  7C 03 00 40 */	cmplw r3, r0
/* 800902F0 0008D250  41 82 00 0C */	beq lbl_800902FC
/* 800902F4 0008D254  3B C0 FF FB */	li r30, -5
/* 800902F8 0008D258  48 00 00 E0 */	b lbl_800903D8
lbl_800902FC:
/* 800902FC 0008D25C  80 1F 00 24 */	lwz r0, 0x24(r31)
/* 80090300 0008D260  2C 00 00 01 */	cmpwi r0, 1
/* 80090304 0008D264  40 82 00 88 */	bne lbl_8009038C
/* 80090308 0008D268  80 7F 01 08 */	lwz r3, 0x108(r31)
/* 8009030C 0008D26C  3C 03 80 00 */	addis r0, r3, 0x8000
/* 80090310 0008D270  28 00 00 04 */	cmplwi r0, 4
/* 80090314 0008D274  40 82 00 34 */	bne lbl_80090348
/* 80090318 0008D278  4B FE D0 41 */	bl __OSLockSramEx
/* 8009031C 0008D27C  1C 1D 00 0C */	mulli r0, r29, 0xc
/* 80090320 0008D280  7F 83 02 2E */	lhzx r28, r3, r0
/* 80090324 0008D284  38 60 00 00 */	li r3, 0
/* 80090328 0008D288  4B FE D3 B9 */	bl __OSUnlockSramEx
/* 8009032C 0008D28C  A0 0D 86 70 */	lhz r0, __CARDVendorID-_SDA_BASE_(r13)
/* 80090330 0008D290  28 00 FF FF */	cmplwi r0, 0xffff
/* 80090334 0008D294  41 82 00 0C */	beq lbl_80090340
/* 80090338 0008D298  7C 1C 00 40 */	cmplw r28, r0
/* 8009033C 0008D29C  41 82 00 0C */	beq lbl_80090348
lbl_80090340:
/* 80090340 0008D2A0  3B C0 FF FE */	li r30, -2
/* 80090344 0008D2A4  48 00 00 94 */	b lbl_800903D8
lbl_80090348:
/* 80090348 0008D2A8  38 00 00 02 */	li r0, 2
/* 8009034C 0008D2AC  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80090350 0008D2B0  38 7D 00 00 */	addi r3, r29, 0
/* 80090354 0008D2B4  38 80 00 01 */	li r4, 1
/* 80090358 0008D2B8  4B FF D2 01 */	bl __CARDEnableInterrupt
/* 8009035C 0008D2BC  7C 7E 1B 79 */	or. r30, r3, r3
/* 80090360 0008D2C0  41 80 00 78 */	blt lbl_800903D8
/* 80090364 0008D2C4  3C 60 80 09 */	lis r3, __CARDExiHandler@ha
/* 80090368 0008D2C8  38 83 D3 14 */	addi r4, r3, __CARDExiHandler@l
/* 8009036C 0008D2CC  38 7D 00 00 */	addi r3, r29, 0
/* 80090370 0008D2D0  4B FF 02 7D */	bl EXISetExiCallback
/* 80090374 0008D2D4  7F A3 EB 78 */	mr r3, r29
/* 80090378 0008D2D8  4B FF 0F 55 */	bl EXIUnlock
/* 8009037C 0008D2DC  3C 80 00 01 */	lis r4, 0x0000A000@ha
/* 80090380 0008D2E0  80 7F 00 80 */	lwz r3, 0x80(r31)
/* 80090384 0008D2E4  38 84 A0 00 */	addi r4, r4, 0x0000A000@l
/* 80090388 0008D2E8  4B FE 97 CD */	bl DCInvalidateRange
lbl_8009038C:
/* 8009038C 0008D2EC  80 9F 00 24 */	lwz r4, 0x24(r31)
/* 80090390 0008D2F0  3C 60 80 09 */	lis r3, __CARDMountCallback@ha
/* 80090394 0008D2F4  80 1F 00 0C */	lwz r0, 0xc(r31)
/* 80090398 0008D2F8  38 E3 04 24 */	addi r7, r3, __CARDMountCallback@l
/* 8009039C 0008D2FC  38 64 FF FE */	addi r3, r4, -2
/* 800903A0 0008D300  7C 80 19 D6 */	mullw r4, r0, r3
/* 800903A4 0008D304  80 BF 00 80 */	lwz r5, 0x80(r31)
/* 800903A8 0008D308  54 60 68 24 */	slwi r0, r3, 0xd
/* 800903AC 0008D30C  7C C5 02 14 */	add r6, r5, r0
/* 800903B0 0008D310  38 7D 00 00 */	addi r3, r29, 0
/* 800903B4 0008D314  38 A0 20 00 */	li r5, 0x2000
/* 800903B8 0008D318  4B FF E2 79 */	bl __CARDRead
/* 800903BC 0008D31C  7C 7C 1B 79 */	or. r28, r3, r3
/* 800903C0 0008D320  40 80 00 10 */	bge lbl_800903D0
/* 800903C4 0008D324  38 7F 00 00 */	addi r3, r31, 0
/* 800903C8 0008D328  38 9C 00 00 */	addi r4, r28, 0
/* 800903CC 0008D32C  4B FF DE 39 */	bl __CARDPutControlBlock
lbl_800903D0:
/* 800903D0 0008D330  7F 83 E3 78 */	mr r3, r28
/* 800903D4 0008D334  48 00 00 30 */	b lbl_80090404
lbl_800903D8:
/* 800903D8 0008D338  7F A3 EB 78 */	mr r3, r29
/* 800903DC 0008D33C  4B FF 0E F1 */	bl EXIUnlock
/* 800903E0 0008D340  38 7D 00 00 */	addi r3, r29, 0
/* 800903E4 0008D344  38 9E 00 00 */	addi r4, r30, 0
/* 800903E8 0008D348  48 00 03 5D */	bl DoUnmount
/* 800903EC 0008D34C  7F C3 F3 78 */	mr r3, r30
/* 800903F0 0008D350  48 00 00 14 */	b lbl_80090404
lbl_800903F4:
/* 800903F4 0008D354  38 C4 00 08 */	addi r6, r4, 8
/* 800903F8 0008D358  4B FF FE 10 */	b lbl_80090208
lbl_800903FC:
/* 800903FC 0008D35C  38 65 00 08 */	addi r3, r5, 8
/* 80090400 0008D360  4B FF FE B4 */	b lbl_800902B4
lbl_80090404:
/* 80090404 0008D364  80 01 00 34 */	lwz r0, 0x34(r1)
/* 80090408 0008D368  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 8009040C 0008D36C  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 80090410 0008D370  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 80090414 0008D374  83 81 00 20 */	lwz r28, 0x20(r1)
/* 80090418 0008D378  38 21 00 30 */	addi r1, r1, 0x30
/* 8009041C 0008D37C  7C 08 03 A6 */	mtlr r0
/* 80090420 0008D380  4E 80 00 20 */	blr 

.global __CARDMountCallback
__CARDMountCallback:
/* 80090424 0008D384  7C 08 02 A6 */	mflr r0
/* 80090428 0008D388  90 01 00 04 */	stw r0, 4(r1)
/* 8009042C 0008D38C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80090430 0008D390  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80090434 0008D394  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80090438 0008D398  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8009043C 0008D39C  3B A4 00 00 */	addi r29, r4, 0
/* 80090440 0008D3A0  2C 1D FF FD */	cmpwi r29, -3
/* 80090444 0008D3A4  93 81 00 10 */	stw r28, 0x10(r1)
/* 80090448 0008D3A8  3B 83 00 00 */	addi r28, r3, 0
/* 8009044C 0008D3AC  1C BC 01 10 */	mulli r5, r28, 0x110
/* 80090450 0008D3B0  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 80090454 0008D3B4  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 80090458 0008D3B8  7F E0 2A 14 */	add r31, r0, r5
/* 8009045C 0008D3BC  41 82 00 A8 */	beq lbl_80090504
/* 80090460 0008D3C0  40 80 00 10 */	bge lbl_80090470
/* 80090464 0008D3C4  2C 1D FF FB */	cmpwi r29, -5
/* 80090468 0008D3C8  41 82 00 9C */	beq lbl_80090504
/* 8009046C 0008D3CC  48 00 00 A4 */	b lbl_80090510
lbl_80090470:
/* 80090470 0008D3D0  2C 1D 00 01 */	cmpwi r29, 1
/* 80090474 0008D3D4  41 82 00 4C */	beq lbl_800904C0
/* 80090478 0008D3D8  40 80 00 98 */	bge lbl_80090510
/* 8009047C 0008D3DC  2C 1D 00 00 */	cmpwi r29, 0
/* 80090480 0008D3E0  40 80 00 08 */	bge lbl_80090488
/* 80090484 0008D3E4  48 00 00 8C */	b lbl_80090510
lbl_80090488:
/* 80090488 0008D3E8  80 7F 00 24 */	lwz r3, 0x24(r31)
/* 8009048C 0008D3EC  38 03 00 01 */	addi r0, r3, 1
/* 80090490 0008D3F0  2C 00 00 07 */	cmpwi r0, 7
/* 80090494 0008D3F4  90 1F 00 24 */	stw r0, 0x24(r31)
/* 80090498 0008D3F8  40 80 00 18 */	bge lbl_800904B0
/* 8009049C 0008D3FC  7F 83 E3 78 */	mr r3, r28
/* 800904A0 0008D400  4B FF FB 75 */	bl DoMount
/* 800904A4 0008D404  7C 7D 1B 79 */	or. r29, r3, r3
/* 800904A8 0008D408  41 80 00 68 */	blt lbl_80090510
/* 800904AC 0008D40C  48 00 00 90 */	b lbl_8009053C
lbl_800904B0:
/* 800904B0 0008D410  7F E3 FB 78 */	mr r3, r31
/* 800904B4 0008D414  4B FF F2 81 */	bl __CARDVerify
/* 800904B8 0008D418  7C 7D 1B 78 */	mr r29, r3
/* 800904BC 0008D41C  48 00 00 54 */	b lbl_80090510
lbl_800904C0:
/* 800904C0 0008D420  3C 60 80 09 */	lis r3, __CARDMountCallback@ha
/* 800904C4 0008D424  38 03 04 24 */	addi r0, r3, __CARDMountCallback@l
/* 800904C8 0008D428  3C 60 80 09 */	lis r3, __CARDUnlockedHandler@ha
/* 800904CC 0008D42C  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 800904D0 0008D430  38 A3 D4 D4 */	addi r5, r3, __CARDUnlockedHandler@l
/* 800904D4 0008D434  38 7C 00 00 */	addi r3, r28, 0
/* 800904D8 0008D438  38 80 00 00 */	li r4, 0
/* 800904DC 0008D43C  4B FF 0C FD */	bl EXILock
/* 800904E0 0008D440  2C 03 00 00 */	cmpwi r3, 0
/* 800904E4 0008D444  41 82 00 58 */	beq lbl_8009053C
/* 800904E8 0008D448  38 00 00 00 */	li r0, 0
/* 800904EC 0008D44C  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 800904F0 0008D450  7F 83 E3 78 */	mr r3, r28
/* 800904F4 0008D454  4B FF FB 21 */	bl DoMount
/* 800904F8 0008D458  7C 7D 1B 79 */	or. r29, r3, r3
/* 800904FC 0008D45C  41 80 00 14 */	blt lbl_80090510
/* 80090500 0008D460  48 00 00 3C */	b lbl_8009053C
lbl_80090504:
/* 80090504 0008D464  38 7C 00 00 */	addi r3, r28, 0
/* 80090508 0008D468  38 9D 00 00 */	addi r4, r29, 0
/* 8009050C 0008D46C  48 00 02 39 */	bl DoUnmount
lbl_80090510:
/* 80090510 0008D470  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 80090514 0008D474  38 00 00 00 */	li r0, 0
/* 80090518 0008D478  38 7F 00 00 */	addi r3, r31, 0
/* 8009051C 0008D47C  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80090520 0008D480  7F A4 EB 78 */	mr r4, r29
/* 80090524 0008D484  4B FF DC E1 */	bl __CARDPutControlBlock
/* 80090528 0008D488  39 9E 00 00 */	addi r12, r30, 0
/* 8009052C 0008D48C  7D 88 03 A6 */	mtlr r12
/* 80090530 0008D490  38 7C 00 00 */	addi r3, r28, 0
/* 80090534 0008D494  38 9D 00 00 */	addi r4, r29, 0
/* 80090538 0008D498  4E 80 00 21 */	blrl 
lbl_8009053C:
/* 8009053C 0008D49C  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80090540 0008D4A0  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80090544 0008D4A4  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80090548 0008D4A8  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 8009054C 0008D4AC  83 81 00 10 */	lwz r28, 0x10(r1)
/* 80090550 0008D4B0  38 21 00 20 */	addi r1, r1, 0x20
/* 80090554 0008D4B4  7C 08 03 A6 */	mtlr r0
/* 80090558 0008D4B8  4E 80 00 20 */	blr 

.global CARDMountAsync
CARDMountAsync:
/* 8009055C 0008D4BC  7C 08 02 A6 */	mflr r0
/* 80090560 0008D4C0  90 01 00 04 */	stw r0, 4(r1)
/* 80090564 0008D4C4  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 80090568 0008D4C8  BF 41 00 18 */	stmw r26, 0x18(r1)
/* 8009056C 0008D4CC  7C 7E 1B 79 */	or. r30, r3, r3
/* 80090570 0008D4D0  3B 44 00 00 */	addi r26, r4, 0
/* 80090574 0008D4D4  3B 65 00 00 */	addi r27, r5, 0
/* 80090578 0008D4D8  3B A6 00 00 */	addi r29, r6, 0
/* 8009057C 0008D4DC  41 80 00 0C */	blt lbl_80090588
/* 80090580 0008D4E0  2C 1E 00 02 */	cmpwi r30, 2
/* 80090584 0008D4E4  41 80 00 0C */	blt lbl_80090590
lbl_80090588:
/* 80090588 0008D4E8  38 60 FF 80 */	li r3, -128
/* 8009058C 0008D4EC  48 00 01 5C */	b lbl_800906E8
lbl_80090590:
/* 80090590 0008D4F0  3C 60 80 00 */	lis r3, 0x800030E3@ha
/* 80090594 0008D4F4  88 03 30 E3 */	lbz r0, 0x800030E3@l(r3)
/* 80090598 0008D4F8  54 00 06 31 */	rlwinm. r0, r0, 0, 0x18, 0x18
/* 8009059C 0008D4FC  41 82 00 0C */	beq lbl_800905A8
/* 800905A0 0008D500  38 60 FF FD */	li r3, -3
/* 800905A4 0008D504  48 00 01 44 */	b lbl_800906E8
lbl_800905A8:
/* 800905A8 0008D508  1C 9E 01 10 */	mulli r4, r30, 0x110
/* 800905AC 0008D50C  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 800905B0 0008D510  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 800905B4 0008D514  7F E0 22 14 */	add r31, r0, r4
/* 800905B8 0008D518  4B FE A6 6D */	bl OSDisableInterrupts
/* 800905BC 0008D51C  80 1F 00 04 */	lwz r0, 4(r31)
/* 800905C0 0008D520  3B 83 00 00 */	addi r28, r3, 0
/* 800905C4 0008D524  2C 00 FF FF */	cmpwi r0, -1
/* 800905C8 0008D528  40 82 00 14 */	bne lbl_800905DC
/* 800905CC 0008D52C  7F 83 E3 78 */	mr r3, r28
/* 800905D0 0008D530  4B FE A6 7D */	bl OSRestoreInterrupts
/* 800905D4 0008D534  38 60 FF FF */	li r3, -1
/* 800905D8 0008D538  48 00 01 10 */	b lbl_800906E8
lbl_800905DC:
/* 800905DC 0008D53C  80 1F 00 00 */	lwz r0, 0(r31)
/* 800905E0 0008D540  2C 00 00 00 */	cmpwi r0, 0
/* 800905E4 0008D544  40 82 00 24 */	bne lbl_80090608
/* 800905E8 0008D548  7F C3 F3 78 */	mr r3, r30
/* 800905EC 0008D54C  4B FF 0D BD */	bl EXIGetState
/* 800905F0 0008D550  54 60 07 39 */	rlwinm. r0, r3, 0, 0x1c, 0x1c
/* 800905F4 0008D554  41 82 00 14 */	beq lbl_80090608
/* 800905F8 0008D558  7F 83 E3 78 */	mr r3, r28
/* 800905FC 0008D55C  4B FE A6 51 */	bl OSRestoreInterrupts
/* 80090600 0008D560  38 60 FF FE */	li r3, -2
/* 80090604 0008D564  48 00 00 E4 */	b lbl_800906E8
lbl_80090608:
/* 80090608 0008D568  38 00 FF FF */	li r0, -1
/* 8009060C 0008D56C  90 1F 00 04 */	stw r0, 4(r31)
/* 80090610 0008D570  28 1D 00 00 */	cmplwi r29, 0
/* 80090614 0008D574  93 5F 00 80 */	stw r26, 0x80(r31)
/* 80090618 0008D578  93 7F 00 C4 */	stw r27, 0xc4(r31)
/* 8009061C 0008D57C  41 82 00 0C */	beq lbl_80090628
/* 80090620 0008D580  7F A0 EB 78 */	mr r0, r29
/* 80090624 0008D584  48 00 00 0C */	b lbl_80090630
lbl_80090628:
/* 80090628 0008D588  3C 60 80 09 */	lis r3, __CARDDefaultApiCallback@ha
/* 8009062C 0008D58C  38 03 D2 04 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_80090630:
/* 80090630 0008D590  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80090634 0008D594  38 00 00 00 */	li r0, 0
/* 80090638 0008D598  90 1F 00 CC */	stw r0, 0xcc(r31)
/* 8009063C 0008D59C  80 1F 00 00 */	lwz r0, 0(r31)
/* 80090640 0008D5A0  2C 00 00 00 */	cmpwi r0, 0
/* 80090644 0008D5A4  40 82 00 34 */	bne lbl_80090678
/* 80090648 0008D5A8  3C 60 80 09 */	lis r3, __CARDExtHandler@ha
/* 8009064C 0008D5AC  38 83 D2 3C */	addi r4, r3, __CARDExtHandler@l
/* 80090650 0008D5B0  38 7E 00 00 */	addi r3, r30, 0
/* 80090654 0008D5B4  4B FF 02 BD */	bl EXIAttach
/* 80090658 0008D5B8  2C 03 00 00 */	cmpwi r3, 0
/* 8009065C 0008D5BC  40 82 00 1C */	bne lbl_80090678
/* 80090660 0008D5C0  38 00 FF FD */	li r0, -3
/* 80090664 0008D5C4  90 1F 00 04 */	stw r0, 4(r31)
/* 80090668 0008D5C8  7F 83 E3 78 */	mr r3, r28
/* 8009066C 0008D5CC  4B FE A5 E1 */	bl OSRestoreInterrupts
/* 80090670 0008D5D0  38 60 FF FD */	li r3, -3
/* 80090674 0008D5D4  48 00 00 74 */	b lbl_800906E8
lbl_80090678:
/* 80090678 0008D5D8  3B A0 00 00 */	li r29, 0
/* 8009067C 0008D5DC  93 BF 00 24 */	stw r29, 0x24(r31)
/* 80090680 0008D5E0  38 00 00 01 */	li r0, 1
/* 80090684 0008D5E4  38 7E 00 00 */	addi r3, r30, 0
/* 80090688 0008D5E8  90 1F 00 00 */	stw r0, 0(r31)
/* 8009068C 0008D5EC  38 80 00 00 */	li r4, 0
/* 80090690 0008D5F0  4B FE FF 5D */	bl EXISetExiCallback
/* 80090694 0008D5F4  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 80090698 0008D5F8  4B FE 8C ED */	bl OSCancelAlarm
/* 8009069C 0008D5FC  93 BF 00 84 */	stw r29, 0x84(r31)
/* 800906A0 0008D600  7F 83 E3 78 */	mr r3, r28
/* 800906A4 0008D604  93 BF 00 88 */	stw r29, 0x88(r31)
/* 800906A8 0008D608  4B FE A5 A5 */	bl OSRestoreInterrupts
/* 800906AC 0008D60C  3C 60 80 09 */	lis r3, __CARDMountCallback@ha
/* 800906B0 0008D610  38 03 04 24 */	addi r0, r3, __CARDMountCallback@l
/* 800906B4 0008D614  3C 60 80 09 */	lis r3, __CARDUnlockedHandler@ha
/* 800906B8 0008D618  90 1F 00 DC */	stw r0, 0xdc(r31)
/* 800906BC 0008D61C  38 A3 D4 D4 */	addi r5, r3, __CARDUnlockedHandler@l
/* 800906C0 0008D620  38 7E 00 00 */	addi r3, r30, 0
/* 800906C4 0008D624  38 80 00 00 */	li r4, 0
/* 800906C8 0008D628  4B FF 0B 11 */	bl EXILock
/* 800906CC 0008D62C  2C 03 00 00 */	cmpwi r3, 0
/* 800906D0 0008D630  40 82 00 0C */	bne lbl_800906DC
/* 800906D4 0008D634  38 60 00 00 */	li r3, 0
/* 800906D8 0008D638  48 00 00 10 */	b lbl_800906E8
lbl_800906DC:
/* 800906DC 0008D63C  93 BF 00 DC */	stw r29, 0xdc(r31)
/* 800906E0 0008D640  7F C3 F3 78 */	mr r3, r30
/* 800906E4 0008D644  4B FF F9 31 */	bl DoMount
lbl_800906E8:
/* 800906E8 0008D648  BB 41 00 18 */	lmw r26, 0x18(r1)
/* 800906EC 0008D64C  80 01 00 34 */	lwz r0, 0x34(r1)
/* 800906F0 0008D650  38 21 00 30 */	addi r1, r1, 0x30
/* 800906F4 0008D654  7C 08 03 A6 */	mtlr r0
/* 800906F8 0008D658  4E 80 00 20 */	blr 

.global CARDMount
CARDMount:
/* 800906FC 0008D65C  7C 08 02 A6 */	mflr r0
/* 80090700 0008D660  3C C0 80 09 */	lis r6, __CARDSyncCallback@ha
/* 80090704 0008D664  90 01 00 04 */	stw r0, 4(r1)
/* 80090708 0008D668  38 C6 D2 08 */	addi r6, r6, __CARDSyncCallback@l
/* 8009070C 0008D66C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80090710 0008D670  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80090714 0008D674  3B E3 00 00 */	addi r31, r3, 0
/* 80090718 0008D678  4B FF FE 45 */	bl CARDMountAsync
/* 8009071C 0008D67C  2C 03 00 00 */	cmpwi r3, 0
/* 80090720 0008D680  40 80 00 08 */	bge lbl_80090728
/* 80090724 0008D684  48 00 00 0C */	b lbl_80090730
lbl_80090728:
/* 80090728 0008D688  7F E3 FB 78 */	mr r3, r31
/* 8009072C 0008D68C  4B FF DD 41 */	bl __CARDSync
lbl_80090730:
/* 80090730 0008D690  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80090734 0008D694  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80090738 0008D698  38 21 00 20 */	addi r1, r1, 0x20
/* 8009073C 0008D69C  7C 08 03 A6 */	mtlr r0
/* 80090740 0008D6A0  4E 80 00 20 */	blr 

.global DoUnmount
DoUnmount:
/* 80090744 0008D6A4  7C 08 02 A6 */	mflr r0
/* 80090748 0008D6A8  90 01 00 04 */	stw r0, 4(r1)
/* 8009074C 0008D6AC  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80090750 0008D6B0  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80090754 0008D6B4  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80090758 0008D6B8  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8009075C 0008D6BC  3B A4 00 00 */	addi r29, r4, 0
/* 80090760 0008D6C0  93 81 00 10 */	stw r28, 0x10(r1)
/* 80090764 0008D6C4  3B 83 00 00 */	addi r28, r3, 0
/* 80090768 0008D6C8  1C BC 01 10 */	mulli r5, r28, 0x110
/* 8009076C 0008D6CC  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 80090770 0008D6D0  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 80090774 0008D6D4  7F E0 2A 14 */	add r31, r0, r5
/* 80090778 0008D6D8  4B FE A4 AD */	bl OSDisableInterrupts
/* 8009077C 0008D6DC  80 1F 00 00 */	lwz r0, 0(r31)
/* 80090780 0008D6E0  3B C3 00 00 */	addi r30, r3, 0
/* 80090784 0008D6E4  2C 00 00 00 */	cmpwi r0, 0
/* 80090788 0008D6E8  41 82 00 30 */	beq lbl_800907B8
/* 8009078C 0008D6EC  38 7C 00 00 */	addi r3, r28, 0
/* 80090790 0008D6F0  38 80 00 00 */	li r4, 0
/* 80090794 0008D6F4  4B FE FE 59 */	bl EXISetExiCallback
/* 80090798 0008D6F8  7F 83 E3 78 */	mr r3, r28
/* 8009079C 0008D6FC  4B FF 02 81 */	bl EXIDetach
/* 800907A0 0008D700  38 7F 00 E0 */	addi r3, r31, 0xe0
/* 800907A4 0008D704  4B FE 8B E1 */	bl OSCancelAlarm
/* 800907A8 0008D708  38 00 00 00 */	li r0, 0
/* 800907AC 0008D70C  90 1F 00 00 */	stw r0, 0(r31)
/* 800907B0 0008D710  93 BF 00 04 */	stw r29, 4(r31)
/* 800907B4 0008D714  90 1F 00 24 */	stw r0, 0x24(r31)
lbl_800907B8:
/* 800907B8 0008D718  7F C3 F3 78 */	mr r3, r30
/* 800907BC 0008D71C  4B FE A4 91 */	bl OSRestoreInterrupts
/* 800907C0 0008D720  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800907C4 0008D724  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800907C8 0008D728  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800907CC 0008D72C  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800907D0 0008D730  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800907D4 0008D734  38 21 00 20 */	addi r1, r1, 0x20
/* 800907D8 0008D738  7C 08 03 A6 */	mtlr r0
/* 800907DC 0008D73C  4E 80 00 20 */	blr 

.global CARDUnmount
CARDUnmount:
/* 800907E0 0008D740  7C 08 02 A6 */	mflr r0
/* 800907E4 0008D744  90 01 00 04 */	stw r0, 4(r1)
/* 800907E8 0008D748  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800907EC 0008D74C  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800907F0 0008D750  38 81 00 0C */	addi r4, r1, 0xc
/* 800907F4 0008D754  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800907F8 0008D758  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800907FC 0008D75C  3B A3 00 00 */	addi r29, r3, 0
/* 80090800 0008D760  4B FF D9 4D */	bl __CARDGetControlBlock
/* 80090804 0008D764  2C 03 00 00 */	cmpwi r3, 0
/* 80090808 0008D768  40 80 00 08 */	bge lbl_80090810
/* 8009080C 0008D76C  48 00 00 64 */	b lbl_80090870
lbl_80090810:
/* 80090810 0008D770  1C 9D 01 10 */	mulli r4, r29, 0x110
/* 80090814 0008D774  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 80090818 0008D778  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 8009081C 0008D77C  7F C0 22 14 */	add r30, r0, r4
/* 80090820 0008D780  4B FE A4 05 */	bl OSDisableInterrupts
/* 80090824 0008D784  80 1E 00 00 */	lwz r0, 0(r30)
/* 80090828 0008D788  3B E3 00 00 */	addi r31, r3, 0
/* 8009082C 0008D78C  2C 00 00 00 */	cmpwi r0, 0
/* 80090830 0008D790  41 82 00 34 */	beq lbl_80090864
/* 80090834 0008D794  38 7D 00 00 */	addi r3, r29, 0
/* 80090838 0008D798  38 80 00 00 */	li r4, 0
/* 8009083C 0008D79C  4B FE FD B1 */	bl EXISetExiCallback
/* 80090840 0008D7A0  7F A3 EB 78 */	mr r3, r29
/* 80090844 0008D7A4  4B FF 01 D9 */	bl EXIDetach
/* 80090848 0008D7A8  38 7E 00 E0 */	addi r3, r30, 0xe0
/* 8009084C 0008D7AC  4B FE 8B 39 */	bl OSCancelAlarm
/* 80090850 0008D7B0  38 60 00 00 */	li r3, 0
/* 80090854 0008D7B4  90 7E 00 00 */	stw r3, 0(r30)
/* 80090858 0008D7B8  38 00 FF FD */	li r0, -3
/* 8009085C 0008D7BC  90 1E 00 04 */	stw r0, 4(r30)
/* 80090860 0008D7C0  90 7E 00 24 */	stw r3, 0x24(r30)
lbl_80090864:
/* 80090864 0008D7C4  7F E3 FB 78 */	mr r3, r31
/* 80090868 0008D7C8  4B FE A3 E5 */	bl OSRestoreInterrupts
/* 8009086C 0008D7CC  38 60 00 00 */	li r3, 0
lbl_80090870:
/* 80090870 0008D7D0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 80090874 0008D7D4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80090878 0008D7D8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 8009087C 0008D7DC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80090880 0008D7E0  38 21 00 20 */	addi r1, r1, 0x20
/* 80090884 0008D7E4  7C 08 03 A6 */	mtlr r0
/* 80090888 0008D7E8  4E 80 00 20 */	blr 
