.include "macros.inc"

.section .text

.org 0x80092204

.global DeleteCallback
DeleteCallback:
/* 80092204 0008F164  7C 08 02 A6 */	mflr r0
/* 80092208 0008F168  90 01 00 04 */	stw r0, 4(r1)
/* 8009220C 0008F16C  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 80092210 0008F170  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 80092214 0008F174  93 C1 00 18 */	stw r30, 0x18(r1)
/* 80092218 0008F178  93 A1 00 14 */	stw r29, 0x14(r1)
/* 8009221C 0008F17C  7C 9D 23 79 */	or. r29, r4, r4
/* 80092220 0008F180  93 81 00 10 */	stw r28, 0x10(r1)
/* 80092224 0008F184  3B 83 00 00 */	addi r28, r3, 0
/* 80092228 0008F188  1C BC 01 10 */	mulli r5, r28, 0x110
/* 8009222C 0008F18C  3C 60 80 21 */	lis r3, __CARDBlock@ha
/* 80092230 0008F190  38 03 84 E0 */	addi r0, r3, __CARDBlock@l
/* 80092234 0008F194  7F E0 2A 14 */	add r31, r0, r5
/* 80092238 0008F198  83 DF 00 D0 */	lwz r30, 0xd0(r31)
/* 8009223C 0008F19C  38 00 00 00 */	li r0, 0
/* 80092240 0008F1A0  90 1F 00 D0 */	stw r0, 0xd0(r31)
/* 80092244 0008F1A4  41 80 00 1C */	blt lbl_80092260
/* 80092248 0008F1A8  A0 9F 00 BE */	lhz r4, 0xbe(r31)
/* 8009224C 0008F1AC  38 7C 00 00 */	addi r3, r28, 0
/* 80092250 0008F1B0  38 BE 00 00 */	addi r5, r30, 0
/* 80092254 0008F1B4  4B FF C8 3D */	bl __CARDFreeBlock
/* 80092258 0008F1B8  7C 7D 1B 79 */	or. r29, r3, r3
/* 8009225C 0008F1BC  40 80 00 2C */	bge lbl_80092288
lbl_80092260:
/* 80092260 0008F1C0  38 7F 00 00 */	addi r3, r31, 0
/* 80092264 0008F1C4  38 9D 00 00 */	addi r4, r29, 0
/* 80092268 0008F1C8  4B FF BF 9D */	bl __CARDPutControlBlock
/* 8009226C 0008F1CC  28 1E 00 00 */	cmplwi r30, 0
/* 80092270 0008F1D0  41 82 00 18 */	beq lbl_80092288
/* 80092274 0008F1D4  39 9E 00 00 */	addi r12, r30, 0
/* 80092278 0008F1D8  7D 88 03 A6 */	mtlr r12
/* 8009227C 0008F1DC  38 7C 00 00 */	addi r3, r28, 0
/* 80092280 0008F1E0  38 9D 00 00 */	addi r4, r29, 0
/* 80092284 0008F1E4  4E 80 00 21 */	blrl 
lbl_80092288:
/* 80092288 0008F1E8  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8009228C 0008F1EC  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 80092290 0008F1F0  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 80092294 0008F1F4  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 80092298 0008F1F8  83 81 00 10 */	lwz r28, 0x10(r1)
/* 8009229C 0008F1FC  38 21 00 20 */	addi r1, r1, 0x20
/* 800922A0 0008F200  7C 08 03 A6 */	mtlr r0
/* 800922A4 0008F204  4E 80 00 20 */	blr 

.global CARDDeleteAsync
CARDDeleteAsync:
/* 800922A8 0008F208  7C 08 02 A6 */	mflr r0
/* 800922AC 0008F20C  90 01 00 04 */	stw r0, 4(r1)
/* 800922B0 0008F210  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 800922B4 0008F214  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 800922B8 0008F218  3B E3 00 00 */	addi r31, r3, 0
/* 800922BC 0008F21C  93 C1 00 28 */	stw r30, 0x28(r1)
/* 800922C0 0008F220  3B C5 00 00 */	addi r30, r5, 0
/* 800922C4 0008F224  93 A1 00 24 */	stw r29, 0x24(r1)
/* 800922C8 0008F228  3B A4 00 00 */	addi r29, r4, 0
/* 800922CC 0008F22C  38 81 00 18 */	addi r4, r1, 0x18
/* 800922D0 0008F230  4B FF BE 7D */	bl __CARDGetControlBlock
/* 800922D4 0008F234  2C 03 00 00 */	cmpwi r3, 0
/* 800922D8 0008F238  40 80 00 08 */	bge lbl_800922E0
/* 800922DC 0008F23C  48 00 00 C0 */	b lbl_8009239C
lbl_800922E0:
/* 800922E0 0008F240  80 61 00 18 */	lwz r3, 0x18(r1)
/* 800922E4 0008F244  38 9D 00 00 */	addi r4, r29, 0
/* 800922E8 0008F248  38 A1 00 14 */	addi r5, r1, 0x14
/* 800922EC 0008F24C  4B FF EF 09 */	bl __CARDGetFileNo
/* 800922F0 0008F250  7C 64 1B 79 */	or. r4, r3, r3
/* 800922F4 0008F254  40 80 00 10 */	bge lbl_80092304
/* 800922F8 0008F258  80 61 00 18 */	lwz r3, 0x18(r1)
/* 800922FC 0008F25C  4B FF BF 09 */	bl __CARDPutControlBlock
/* 80092300 0008F260  48 00 00 9C */	b lbl_8009239C
lbl_80092304:
/* 80092304 0008F264  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80092308 0008F268  80 81 00 14 */	lwz r4, 0x14(r1)
/* 8009230C 0008F26C  4B FF F3 65 */	bl __CARDIsOpened
/* 80092310 0008F270  2C 03 00 00 */	cmpwi r3, 0
/* 80092314 0008F274  41 82 00 14 */	beq lbl_80092328
/* 80092318 0008F278  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8009231C 0008F27C  38 80 FF FF */	li r4, -1
/* 80092320 0008F280  4B FF BE E5 */	bl __CARDPutControlBlock
/* 80092324 0008F284  48 00 00 78 */	b lbl_8009239C
lbl_80092328:
/* 80092328 0008F288  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8009232C 0008F28C  4B FF C8 AD */	bl __CARDGetDirBlock
/* 80092330 0008F290  80 01 00 14 */	lwz r0, 0x14(r1)
/* 80092334 0008F294  38 80 00 FF */	li r4, 0xff
/* 80092338 0008F298  80 C1 00 18 */	lwz r6, 0x18(r1)
/* 8009233C 0008F29C  38 A0 00 40 */	li r5, 0x40
/* 80092340 0008F2A0  54 00 30 32 */	slwi r0, r0, 6
/* 80092344 0008F2A4  7C 63 02 14 */	add r3, r3, r0
/* 80092348 0008F2A8  A0 03 00 36 */	lhz r0, 0x36(r3)
/* 8009234C 0008F2AC  B0 06 00 BE */	sth r0, 0xbe(r6)
/* 80092350 0008F2B0  4B F7 10 59 */	bl memset
/* 80092354 0008F2B4  28 1E 00 00 */	cmplwi r30, 0
/* 80092358 0008F2B8  41 82 00 0C */	beq lbl_80092364
/* 8009235C 0008F2BC  7F C0 F3 78 */	mr r0, r30
/* 80092360 0008F2C0  48 00 00 0C */	b lbl_8009236C
lbl_80092364:
/* 80092364 0008F2C4  3C 60 80 09 */	lis r3, __CARDDefaultApiCallback@ha
/* 80092368 0008F2C8  38 03 D2 04 */	addi r0, r3, __CARDDefaultApiCallback@l
lbl_8009236C:
/* 8009236C 0008F2CC  80 A1 00 18 */	lwz r5, 0x18(r1)
/* 80092370 0008F2D0  3C 60 80 09 */	lis r3, DeleteCallback@ha
/* 80092374 0008F2D4  38 83 22 04 */	addi r4, r3, DeleteCallback@l
/* 80092378 0008F2D8  90 05 00 D0 */	stw r0, 0xd0(r5)
/* 8009237C 0008F2DC  7F E3 FB 78 */	mr r3, r31
/* 80092380 0008F2E0  4B FF C9 F9 */	bl __CARDUpdateDir
/* 80092384 0008F2E4  7C 7F 1B 79 */	or. r31, r3, r3
/* 80092388 0008F2E8  40 80 00 10 */	bge lbl_80092398
/* 8009238C 0008F2EC  80 61 00 18 */	lwz r3, 0x18(r1)
/* 80092390 0008F2F0  7F E4 FB 78 */	mr r4, r31
/* 80092394 0008F2F4  4B FF BE 71 */	bl __CARDPutControlBlock
lbl_80092398:
/* 80092398 0008F2F8  7F E3 FB 78 */	mr r3, r31
lbl_8009239C:
/* 8009239C 0008F2FC  80 01 00 34 */	lwz r0, 0x34(r1)
/* 800923A0 0008F300  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 800923A4 0008F304  83 C1 00 28 */	lwz r30, 0x28(r1)
/* 800923A8 0008F308  83 A1 00 24 */	lwz r29, 0x24(r1)
/* 800923AC 0008F30C  38 21 00 30 */	addi r1, r1, 0x30
/* 800923B0 0008F310  7C 08 03 A6 */	mtlr r0
/* 800923B4 0008F314  4E 80 00 20 */	blr 

.global CARDDelete
CARDDelete:
/* 800923B8 0008F318  7C 08 02 A6 */	mflr r0
/* 800923BC 0008F31C  3C A0 80 09 */	lis r5, __CARDSyncCallback@ha
/* 800923C0 0008F320  90 01 00 04 */	stw r0, 4(r1)
/* 800923C4 0008F324  38 A5 D2 08 */	addi r5, r5, __CARDSyncCallback@l
/* 800923C8 0008F328  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 800923CC 0008F32C  93 E1 00 14 */	stw r31, 0x14(r1)
/* 800923D0 0008F330  3B E3 00 00 */	addi r31, r3, 0
/* 800923D4 0008F334  4B FF FE D5 */	bl CARDDeleteAsync
/* 800923D8 0008F338  2C 03 00 00 */	cmpwi r3, 0
/* 800923DC 0008F33C  40 80 00 08 */	bge lbl_800923E4
/* 800923E0 0008F340  48 00 00 0C */	b lbl_800923EC
lbl_800923E4:
/* 800923E4 0008F344  7F E3 FB 78 */	mr r3, r31
/* 800923E8 0008F348  4B FF C0 85 */	bl __CARDSync
lbl_800923EC:
/* 800923EC 0008F34C  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 800923F0 0008F350  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 800923F4 0008F354  38 21 00 18 */	addi r1, r1, 0x18
/* 800923F8 0008F358  7C 08 03 A6 */	mtlr r0
/* 800923FC 0008F35C  4E 80 00 20 */	blr 
