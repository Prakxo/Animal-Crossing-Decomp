.include "macros.inc"

.section .text

.org 0x80087B50

.global cb
cb:
/* 80087B50 00084AB0  7C 08 02 A6 */	mflr r0
/* 80087B54 00084AB4  2C 03 00 00 */	cmpwi r3, 0
/* 80087B58 00084AB8  90 01 00 04 */	stw r0, 4(r1)
/* 80087B5C 00084ABC  94 21 FF E8 */	stwu r1, -0x18(r1)
/* 80087B60 00084AC0  93 E1 00 14 */	stw r31, 0x14(r1)
/* 80087B64 00084AC4  3B E4 00 00 */	addi r31, r4, 0
/* 80087B68 00084AC8  40 81 00 7C */	ble lbl_80087BE4
/* 80087B6C 00084ACC  80 0D 8E C0 */	lwz r0, status-_SDA_BASE_(r13)
/* 80087B70 00084AD0  2C 00 00 01 */	cmpwi r0, 1
/* 80087B74 00084AD4  41 82 00 3C */	beq lbl_80087BB0
/* 80087B78 00084AD8  40 80 00 9C */	bge lbl_80087C14
/* 80087B7C 00084ADC  2C 00 00 00 */	cmpwi r0, 0
/* 80087B80 00084AE0  40 80 00 08 */	bge lbl_80087B88
/* 80087B84 00084AE4  48 00 00 90 */	b lbl_80087C14
lbl_80087B88:
/* 80087B88 00084AE8  38 00 00 01 */	li r0, 1
/* 80087B8C 00084AEC  80 8D 8E C4 */	lwz r4, bb2-_SDA_BASE_(r13)
/* 80087B90 00084AF0  3C 60 80 08 */	lis r3, cb@ha
/* 80087B94 00084AF4  90 0D 8E C0 */	stw r0, status-_SDA_BASE_(r13)
/* 80087B98 00084AF8  38 E3 7B 50 */	addi r7, r3, cb@l
/* 80087B9C 00084AFC  38 7F 00 00 */	addi r3, r31, 0
/* 80087BA0 00084B00  38 A0 00 20 */	li r5, 0x20
/* 80087BA4 00084B04  38 C0 04 20 */	li r6, 0x420
/* 80087BA8 00084B08  4B FF F1 85 */	bl DVDReadAbsAsyncForBS
/* 80087BAC 00084B0C  48 00 00 68 */	b lbl_80087C14
lbl_80087BB0:
/* 80087BB0 00084B10  38 00 00 02 */	li r0, 2
/* 80087BB4 00084B14  80 CD 8E C4 */	lwz r6, bb2-_SDA_BASE_(r13)
/* 80087BB8 00084B18  90 0D 8E C0 */	stw r0, status-_SDA_BASE_(r13)
/* 80087BBC 00084B1C  3C 60 80 08 */	lis r3, cb@ha
/* 80087BC0 00084B20  38 E3 7B 50 */	addi r7, r3, cb@l
/* 80087BC4 00084B24  80 A6 00 08 */	lwz r5, 8(r6)
/* 80087BC8 00084B28  7F E3 FB 78 */	mr r3, r31
/* 80087BCC 00084B2C  80 86 00 10 */	lwz r4, 0x10(r6)
/* 80087BD0 00084B30  38 05 00 1F */	addi r0, r5, 0x1f
/* 80087BD4 00084B34  80 C6 00 04 */	lwz r6, 4(r6)
/* 80087BD8 00084B38  54 05 00 34 */	rlwinm r5, r0, 0, 0, 0x1a
/* 80087BDC 00084B3C  4B FF F1 51 */	bl DVDReadAbsAsyncForBS
/* 80087BE0 00084B40  48 00 00 34 */	b lbl_80087C14
lbl_80087BE4:
/* 80087BE4 00084B44  2C 03 FF FF */	cmpwi r3, -1
/* 80087BE8 00084B48  41 82 00 2C */	beq lbl_80087C14
/* 80087BEC 00084B4C  2C 03 FF FC */	cmpwi r3, -4
/* 80087BF0 00084B50  40 82 00 24 */	bne lbl_80087C14
/* 80087BF4 00084B54  38 00 00 00 */	li r0, 0
/* 80087BF8 00084B58  90 0D 8E C0 */	stw r0, status-_SDA_BASE_(r13)
/* 80087BFC 00084B5C  4B FF F5 31 */	bl DVDReset
/* 80087C00 00084B60  3C 60 80 08 */	lis r3, cb@ha
/* 80087C04 00084B64  80 8D 8E C8 */	lwz r4, idTmp-_SDA_BASE_(r13)
/* 80087C08 00084B68  38 A3 7B 50 */	addi r5, r3, cb@l
/* 80087C0C 00084B6C  38 7F 00 00 */	addi r3, r31, 0
/* 80087C10 00084B70  4B FF F1 ED */	bl DVDReadDiskID
lbl_80087C14:
/* 80087C14 00084B74  80 01 00 1C */	lwz r0, 0x1c(r1)
/* 80087C18 00084B78  83 E1 00 14 */	lwz r31, 0x14(r1)
/* 80087C1C 00084B7C  38 21 00 18 */	addi r1, r1, 0x18
/* 80087C20 00084B80  7C 08 03 A6 */	mtlr r0
/* 80087C24 00084B84  4E 80 00 20 */	blr 

.global __fstLoad
__fstLoad:
/* 80087C28 00084B88  7C 08 02 A6 */	mflr r0
/* 80087C2C 00084B8C  3C 60 80 0E */	lis r3, @36@ha
/* 80087C30 00084B90  90 01 00 04 */	stw r0, 4(r1)
/* 80087C34 00084B94  94 21 FF A0 */	stwu r1, -0x60(r1)
/* 80087C38 00084B98  93 E1 00 5C */	stw r31, 0x5c(r1)
/* 80087C3C 00084B9C  3B E3 10 F8 */	addi r31, r3, @36@l
/* 80087C40 00084BA0  93 C1 00 58 */	stw r30, 0x58(r1)
/* 80087C44 00084BA4  93 A1 00 54 */	stw r29, 0x54(r1)
/* 80087C48 00084BA8  4B FF 1C 45 */	bl OSGetArenaHi
/* 80087C4C 00084BAC  3C 60 80 21 */	lis r3, bb2Buf@ha
/* 80087C50 00084BB0  38 63 82 D8 */	addi r3, r3, bb2Buf@l
/* 80087C54 00084BB4  38 81 00 2B */	addi r4, r1, 0x2b
/* 80087C58 00084BB8  38 03 00 1F */	addi r0, r3, 0x1f
/* 80087C5C 00084BBC  54 83 00 34 */	rlwinm r3, r4, 0, 0, 0x1a
/* 80087C60 00084BC0  54 00 00 34 */	rlwinm r0, r0, 0, 0, 0x1a
/* 80087C64 00084BC4  90 6D 8E C8 */	stw r3, idTmp-_SDA_BASE_(r13)
/* 80087C68 00084BC8  90 0D 8E C4 */	stw r0, bb2-_SDA_BASE_(r13)
/* 80087C6C 00084BCC  4B FF F4 C1 */	bl DVDReset
/* 80087C70 00084BD0  3C 60 80 21 */	lis r3, block$16@ha
/* 80087C74 00084BD4  80 8D 8E C8 */	lwz r4, idTmp-_SDA_BASE_(r13)
/* 80087C78 00084BD8  3C A0 80 08 */	lis r5, cb@ha
/* 80087C7C 00084BDC  38 63 83 18 */	addi r3, r3, block$16@l
/* 80087C80 00084BE0  38 A5 7B 50 */	addi r5, r5, cb@l
/* 80087C84 00084BE4  4B FF F1 79 */	bl DVDReadDiskID
lbl_80087C88:
/* 80087C88 00084BE8  4B FF F5 35 */	bl DVDGetDriveStatus
/* 80087C8C 00084BEC  2C 03 00 00 */	cmpwi r3, 0
/* 80087C90 00084BF0  40 82 FF F8 */	bne lbl_80087C88
/* 80087C94 00084BF4  80 6D 8E C4 */	lwz r3, bb2-_SDA_BASE_(r13)
/* 80087C98 00084BF8  3F A0 80 00 */	lis r29, 0x80000000@ha
/* 80087C9C 00084BFC  3F C0 80 00 */	lis r30, 0x80000038@ha
/* 80087CA0 00084C00  80 03 00 10 */	lwz r0, 0x10(r3)
/* 80087CA4 00084C04  38 7D 00 00 */	addi r3, r29, 0x80000000@l
/* 80087CA8 00084C08  38 A0 00 20 */	li r5, 0x20
/* 80087CAC 00084C0C  90 1E 00 38 */	stw r0, 0x80000038@l(r30)
/* 80087CB0 00084C10  80 8D 8E C4 */	lwz r4, bb2-_SDA_BASE_(r13)
/* 80087CB4 00084C14  80 04 00 0C */	lwz r0, 0xc(r4)
/* 80087CB8 00084C18  90 1E 00 3C */	stw r0, 0x3c(r30)
/* 80087CBC 00084C1C  80 8D 8E C8 */	lwz r4, idTmp-_SDA_BASE_(r13)
/* 80087CC0 00084C20  4B F7 B7 D1 */	bl memcpy
/* 80087CC4 00084C24  38 6D 86 38 */	addi r3, r13, @35-_SDA_BASE_
/* 80087CC8 00084C28  4C C6 31 82 */	crclr 6
/* 80087CCC 00084C2C  4B FD 2A 85 */	bl OSReport
/* 80087CD0 00084C30  88 9D 00 00 */	lbz r4, 0(r29)
/* 80087CD4 00084C34  7F E3 FB 78 */	mr r3, r31
/* 80087CD8 00084C38  88 BD 00 01 */	lbz r5, 1(r29)
/* 80087CDC 00084C3C  4C C6 31 82 */	crclr 6
/* 80087CE0 00084C40  88 DD 00 02 */	lbz r6, 2(r29)
/* 80087CE4 00084C44  88 FD 00 03 */	lbz r7, 3(r29)
/* 80087CE8 00084C48  7C 84 07 74 */	extsb r4, r4
/* 80087CEC 00084C4C  7C A5 07 74 */	extsb r5, r5
/* 80087CF0 00084C50  7C C6 07 74 */	extsb r6, r6
/* 80087CF4 00084C54  7C E7 07 74 */	extsb r7, r7
/* 80087CF8 00084C58  4B FD 2A 59 */	bl OSReport
/* 80087CFC 00084C5C  88 9D 00 04 */	lbz r4, 4(r29)
/* 80087D00 00084C60  38 7F 00 1C */	addi r3, r31, 0x1c
/* 80087D04 00084C64  88 BD 00 05 */	lbz r5, 5(r29)
/* 80087D08 00084C68  4C C6 31 82 */	crclr 6
/* 80087D0C 00084C6C  7C 84 07 74 */	extsb r4, r4
/* 80087D10 00084C70  7C A5 07 74 */	extsb r5, r5
/* 80087D14 00084C74  4B FD 2A 3D */	bl OSReport
/* 80087D18 00084C78  88 9D 00 06 */	lbz r4, 6(r29)
/* 80087D1C 00084C7C  38 7F 00 34 */	addi r3, r31, 0x34
/* 80087D20 00084C80  4C C6 31 82 */	crclr 6
/* 80087D24 00084C84  4B FD 2A 2D */	bl OSReport
/* 80087D28 00084C88  88 9D 00 07 */	lbz r4, 7(r29)
/* 80087D2C 00084C8C  38 7F 00 48 */	addi r3, r31, 0x48
/* 80087D30 00084C90  4C C6 31 82 */	crclr 6
/* 80087D34 00084C94  4B FD 2A 1D */	bl OSReport
/* 80087D38 00084C98  88 1E 00 08 */	lbz r0, 8(r30)
/* 80087D3C 00084C9C  28 00 00 00 */	cmplwi r0, 0
/* 80087D40 00084CA0  40 82 00 0C */	bne lbl_80087D4C
/* 80087D44 00084CA4  38 8D 86 3C */	addi r4, r13, @40-_SDA_BASE_
/* 80087D48 00084CA8  48 00 00 08 */	b lbl_80087D50
lbl_80087D4C:
/* 80087D4C 00084CAC  38 8D 86 40 */	addi r4, r13, @41-_SDA_BASE_
lbl_80087D50:
/* 80087D50 00084CB0  4C C6 31 82 */	crclr 6
/* 80087D54 00084CB4  38 7F 00 5C */	addi r3, r31, 0x5c
/* 80087D58 00084CB8  4B FD 29 F9 */	bl OSReport
/* 80087D5C 00084CBC  38 6D 86 38 */	addi r3, r13, @35-_SDA_BASE_
/* 80087D60 00084CC0  4C C6 31 82 */	crclr 6
/* 80087D64 00084CC4  4B FD 29 ED */	bl OSReport
/* 80087D68 00084CC8  80 6D 8E C4 */	lwz r3, bb2-_SDA_BASE_(r13)
/* 80087D6C 00084CCC  80 63 00 10 */	lwz r3, 0x10(r3)
/* 80087D70 00084CD0  4B FF 1B 2D */	bl OSSetArenaHi
/* 80087D74 00084CD4  80 01 00 64 */	lwz r0, 0x64(r1)
/* 80087D78 00084CD8  83 E1 00 5C */	lwz r31, 0x5c(r1)
/* 80087D7C 00084CDC  83 C1 00 58 */	lwz r30, 0x58(r1)
/* 80087D80 00084CE0  83 A1 00 54 */	lwz r29, 0x54(r1)
/* 80087D84 00084CE4  38 21 00 60 */	addi r1, r1, 0x60
/* 80087D88 00084CE8  7C 08 03 A6 */	mtlr r0
/* 80087D8C 00084CEC  4E 80 00 20 */	blr 
