.include "macros.inc"

.section .text

.org 0x8005E414

.global guPerspective
guPerspective:
/* 8005E414 0005B374  94 21 FF 40 */	stwu r1, -0xc0(r1)
/* 8005E418 0005B378  7C 08 02 A6 */	mflr r0
/* 8005E41C 0005B37C  90 01 00 C4 */	stw r0, 0xc4(r1)
/* 8005E420 0005B380  DB E1 00 B0 */	stfd f31, 0xb0(r1)
/* 8005E424 0005B384  F3 E1 00 B8 */	psq_st f31, 184(r1), 0, qr0
/* 8005E428 0005B388  DB C1 00 A0 */	stfd f30, 0xa0(r1)
/* 8005E42C 0005B38C  F3 C1 00 A8 */	psq_st f30, 168(r1), 0, qr0
/* 8005E430 0005B390  DB A1 00 90 */	stfd f29, 0x90(r1)
/* 8005E434 0005B394  F3 A1 00 98 */	psq_st f29, 152(r1), 0, qr0
/* 8005E438 0005B398  DB 81 00 80 */	stfd f28, 0x80(r1)
/* 8005E43C 0005B39C  F3 81 00 88 */	psq_st f28, 136(r1), 0, qr0
/* 8005E440 0005B3A0  DB 61 00 70 */	stfd f27, 0x70(r1)
/* 8005E444 0005B3A4  F3 61 00 78 */	psq_st f27, 120(r1), 0, qr0
/* 8005E448 0005B3A8  DB 41 00 60 */	stfd f26, 0x60(r1)
/* 8005E44C 0005B3AC  F3 41 00 68 */	psq_st f26, 104(r1), 0, qr0
/* 8005E450 0005B3B0  93 E1 00 5C */	stw r31, 0x5c(r1)
/* 8005E454 0005B3B4  93 C1 00 58 */	stw r30, 0x58(r1)
/* 8005E458 0005B3B8  FF 40 08 90 */	fmr f26, f1
/* 8005E45C 0005B3BC  7C 7E 1B 78 */	mr r30, r3
/* 8005E460 0005B3C0  FF 80 10 90 */	fmr f28, f2
/* 8005E464 0005B3C4  7C 9F 23 78 */	mr r31, r4
/* 8005E468 0005B3C8  FF A0 18 90 */	fmr f29, f3
/* 8005E46C 0005B3CC  38 61 00 08 */	addi r3, r1, 8
/* 8005E470 0005B3D0  FF C0 20 90 */	fmr f30, f4
/* 8005E474 0005B3D4  FF E0 28 90 */	fmr f31, f5
/* 8005E478 0005B3D8  4B FF FB 2D */	bl guMtxIdentF
/* 8005E47C 0005B3DC  C8 22 85 F8 */	lfd f1, @288-_SDA2_BASE_(r2)
/* 8005E480 0005B3E0  C0 02 86 00 */	lfs f0, @289-_SDA2_BASE_(r2)
/* 8005E484 0005B3E4  FC 3A 00 72 */	fmul f1, f26, f1
/* 8005E488 0005B3E8  FC 20 08 18 */	frsp f1, f1
/* 8005E48C 0005B3EC  EF 41 00 32 */	fmuls f26, f1, f0
/* 8005E490 0005B3F0  FC 20 D0 90 */	fmr f1, f26
/* 8005E494 0005B3F4  48 04 3A 49 */	bl sin
/* 8005E498 0005B3F8  FF 60 08 18 */	frsp f27, f1
/* 8005E49C 0005B3FC  FC 20 D0 90 */	fmr f1, f26
/* 8005E4A0 0005B400  48 04 34 D5 */	bl cos
/* 8005E4A4 0005B404  FC 20 08 18 */	frsp f1, f1
/* 8005E4A8 0005B408  C0 02 86 08 */	lfs f0, @291-_SDA2_BASE_(r2)
/* 8005E4AC 0005B40C  C0 A1 00 0C */	lfs f5, 0xc(r1)
/* 8005E4B0 0005B410  ED BD F0 2A */	fadds f13, f29, f30
/* 8005E4B4 0005B414  ED 9D F0 28 */	fsubs f12, f29, f30
/* 8005E4B8 0005B418  C0 61 00 10 */	lfs f3, 0x10(r1)
/* 8005E4BC 0005B41C  ED 21 D8 24 */	fdivs f9, f1, f27
/* 8005E4C0 0005B420  C1 42 86 04 */	lfs f10, @290-_SDA2_BASE_(r2)
/* 8005E4C4 0005B424  C1 02 86 0C */	lfs f8, @292-_SDA2_BASE_(r2)
/* 8005E4C8 0005B428  28 1F 00 00 */	cmplwi r31, 0
/* 8005E4CC 0005B42C  C0 21 00 14 */	lfs f1, 0x14(r1)
/* 8005E4D0 0005B430  D1 41 00 34 */	stfs f10, 0x34(r1)
/* 8005E4D4 0005B434  EC E9 E0 24 */	fdivs f7, f9, f28
/* 8005E4D8 0005B438  D1 21 00 1C */	stfs f9, 0x1c(r1)
/* 8005E4DC 0005B43C  D1 01 00 44 */	stfs f8, 0x44(r1)
/* 8005E4E0 0005B440  EC 85 07 F2 */	fmuls f4, f5, f31
/* 8005E4E4 0005B444  D0 E1 00 08 */	stfs f7, 8(r1)
/* 8005E4E8 0005B448  EC 43 07 F2 */	fmuls f2, f3, f31
/* 8005E4EC 0005B44C  C0 61 00 20 */	lfs f3, 0x20(r1)
/* 8005E4F0 0005B450  EC C0 07 72 */	fmuls f6, f0, f29
/* 8005E4F4 0005B454  EC 01 07 F2 */	fmuls f0, f1, f31
/* 8005E4F8 0005B458  ED 6D 60 24 */	fdivs f11, f13, f12
/* 8005E4FC 0005B45C  D0 41 00 10 */	stfs f2, 0x10(r1)
/* 8005E500 0005B460  C0 21 00 24 */	lfs f1, 0x24(r1)
/* 8005E504 0005B464  D0 01 00 14 */	stfs f0, 0x14(r1)
/* 8005E508 0005B468  D0 81 00 0C */	stfs f4, 0xc(r1)
/* 8005E50C 0005B46C  EC 01 07 F2 */	fmuls f0, f1, f31
/* 8005E510 0005B470  EC 43 07 F2 */	fmuls f2, f3, f31
/* 8005E514 0005B474  D1 61 00 30 */	stfs f11, 0x30(r1)
/* 8005E518 0005B478  FC A0 48 18 */	frsp f5, f9
/* 8005E51C 0005B47C  EC 26 07 B2 */	fmuls f1, f6, f30
/* 8005E520 0005B480  D0 01 00 24 */	stfs f0, 0x24(r1)
/* 8005E524 0005B484  FC E0 38 18 */	frsp f7, f7
/* 8005E528 0005B488  EC 85 07 F2 */	fmuls f4, f5, f31
/* 8005E52C 0005B48C  C0 A1 00 2C */	lfs f5, 0x2c(r1)
/* 8005E530 0005B490  ED 21 60 24 */	fdivs f9, f1, f12
/* 8005E534 0005B494  D0 41 00 20 */	stfs f2, 0x20(r1)
/* 8005E538 0005B498  D0 81 00 1C */	stfs f4, 0x1c(r1)
/* 8005E53C 0005B49C  EC C7 07 F2 */	fmuls f6, f7, f31
/* 8005E540 0005B4A0  C0 E1 00 18 */	lfs f7, 0x18(r1)
/* 8005E544 0005B4A4  EC 85 07 F2 */	fmuls f4, f5, f31
/* 8005E548 0005B4A8  C0 A1 00 3C */	lfs f5, 0x3c(r1)
/* 8005E54C 0005B4AC  FC 60 58 18 */	frsp f3, f11
/* 8005E550 0005B4B0  D1 21 00 40 */	stfs f9, 0x40(r1)
/* 8005E554 0005B4B4  D0 C1 00 08 */	stfs f6, 8(r1)
/* 8005E558 0005B4B8  EC C7 07 F2 */	fmuls f6, f7, f31
/* 8005E55C 0005B4BC  EC 43 07 F2 */	fmuls f2, f3, f31
/* 8005E560 0005B4C0  C0 E1 00 28 */	lfs f7, 0x28(r1)
/* 8005E564 0005B4C4  FC 20 50 18 */	frsp f1, f10
/* 8005E568 0005B4C8  D0 81 00 2C */	stfs f4, 0x2c(r1)
/* 8005E56C 0005B4CC  EC 85 07 F2 */	fmuls f4, f5, f31
/* 8005E570 0005B4D0  D0 C1 00 18 */	stfs f6, 0x18(r1)
/* 8005E574 0005B4D4  EC C7 07 F2 */	fmuls f6, f7, f31
/* 8005E578 0005B4D8  C0 E1 00 38 */	lfs f7, 0x38(r1)
/* 8005E57C 0005B4DC  EC 01 07 F2 */	fmuls f0, f1, f31
/* 8005E580 0005B4E0  D0 41 00 30 */	stfs f2, 0x30(r1)
/* 8005E584 0005B4E4  FC 60 48 18 */	frsp f3, f9
/* 8005E588 0005B4E8  D0 C1 00 28 */	stfs f6, 0x28(r1)
/* 8005E58C 0005B4EC  EC C7 07 F2 */	fmuls f6, f7, f31
/* 8005E590 0005B4F0  EC 43 07 F2 */	fmuls f2, f3, f31
/* 8005E594 0005B4F4  D0 01 00 34 */	stfs f0, 0x34(r1)
/* 8005E598 0005B4F8  FC 20 40 18 */	frsp f1, f8
/* 8005E59C 0005B4FC  D0 C1 00 38 */	stfs f6, 0x38(r1)
/* 8005E5A0 0005B500  EC 01 07 F2 */	fmuls f0, f1, f31
/* 8005E5A4 0005B504  D0 81 00 3C */	stfs f4, 0x3c(r1)
/* 8005E5A8 0005B508  D0 41 00 40 */	stfs f2, 0x40(r1)
/* 8005E5AC 0005B50C  D0 01 00 44 */	stfs f0, 0x44(r1)
/* 8005E5B0 0005B510  41 82 00 50 */	beq lbl_8005E600
/* 8005E5B4 0005B514  C8 02 86 10 */	lfd f0, @293-_SDA2_BASE_(r2)
/* 8005E5B8 0005B518  FC 0D 00 40 */	fcmpo cr0, f13, f0
/* 8005E5BC 0005B51C  4C 40 13 82 */	cror 2, 0, 2
/* 8005E5C0 0005B520  40 82 00 14 */	bne lbl_8005E5D4
/* 8005E5C4 0005B524  3C 60 00 01 */	lis r3, 0x0000FFFF@ha
/* 8005E5C8 0005B528  38 03 FF FF */	addi r0, r3, 0x0000FFFF@l
/* 8005E5CC 0005B52C  B0 1F 00 00 */	sth r0, 0(r31)
/* 8005E5D0 0005B530  48 00 00 30 */	b lbl_8005E600
lbl_8005E5D4:
/* 8005E5D4 0005B534  C8 02 86 18 */	lfd f0, @294-_SDA2_BASE_(r2)
/* 8005E5D8 0005B538  FC 00 68 24 */	fdiv f0, f0, f13
/* 8005E5DC 0005B53C  FC 00 00 1E */	fctiwz f0, f0
/* 8005E5E0 0005B540  D8 01 00 48 */	stfd f0, 0x48(r1)
/* 8005E5E4 0005B544  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 8005E5E8 0005B548  B0 1F 00 00 */	sth r0, 0(r31)
/* 8005E5EC 0005B54C  A0 1F 00 00 */	lhz r0, 0(r31)
/* 8005E5F0 0005B550  28 00 00 00 */	cmplwi r0, 0
/* 8005E5F4 0005B554  40 82 00 0C */	bne lbl_8005E600
/* 8005E5F8 0005B558  38 00 00 01 */	li r0, 1
/* 8005E5FC 0005B55C  B0 1F 00 00 */	sth r0, 0(r31)
lbl_8005E600:
/* 8005E600 0005B560  7F C4 F3 78 */	mr r4, r30
/* 8005E604 0005B564  38 61 00 08 */	addi r3, r1, 8
/* 8005E608 0005B568  4B FF F8 F1 */	bl guMtxF2L
/* 8005E60C 0005B56C  E3 E1 00 B8 */	psq_l f31, 184(r1), 0, qr0
/* 8005E610 0005B570  CB E1 00 B0 */	lfd f31, 0xb0(r1)
/* 8005E614 0005B574  E3 C1 00 A8 */	psq_l f30, 168(r1), 0, qr0
/* 8005E618 0005B578  CB C1 00 A0 */	lfd f30, 0xa0(r1)
/* 8005E61C 0005B57C  E3 A1 00 98 */	psq_l f29, 152(r1), 0, qr0
/* 8005E620 0005B580  CB A1 00 90 */	lfd f29, 0x90(r1)
/* 8005E624 0005B584  E3 81 00 88 */	psq_l f28, 136(r1), 0, qr0
/* 8005E628 0005B588  CB 81 00 80 */	lfd f28, 0x80(r1)
/* 8005E62C 0005B58C  E3 61 00 78 */	psq_l f27, 120(r1), 0, qr0
/* 8005E630 0005B590  CB 61 00 70 */	lfd f27, 0x70(r1)
/* 8005E634 0005B594  E3 41 00 68 */	psq_l f26, 104(r1), 0, qr0
/* 8005E638 0005B598  CB 41 00 60 */	lfd f26, 0x60(r1)
/* 8005E63C 0005B59C  83 E1 00 5C */	lwz r31, 0x5c(r1)
/* 8005E640 0005B5A0  80 01 00 C4 */	lwz r0, 0xc4(r1)
/* 8005E644 0005B5A4  83 C1 00 58 */	lwz r30, 0x58(r1)
/* 8005E648 0005B5A8  7C 08 03 A6 */	mtlr r0
/* 8005E64C 0005B5AC  38 21 00 C0 */	addi r1, r1, 0xc0
/* 8005E650 0005B5B0  4E 80 00 20 */	blr 
