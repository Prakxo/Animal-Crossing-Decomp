.include "macros.inc"

.section .text

.org 0x800A2494

.global TRKMessageSend
TRKMessageSend:
/* 800A2494 0009F3F4  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 800A2498 0009F3F8  7C 08 02 A6 */	mflr r0
/* 800A249C 0009F3FC  38 A0 00 00 */	li r5, 0
/* 800A24A0 0009F400  90 01 00 24 */	stw r0, 0x24(r1)
/* 800A24A4 0009F404  93 E1 00 1C */	stw r31, 0x1c(r1)
/* 800A24A8 0009F408  7C 7F 1B 78 */	mr r31, r3
/* 800A24AC 0009F40C  93 C1 00 18 */	stw r30, 0x18(r1)
/* 800A24B0 0009F410  93 A1 00 14 */	stw r29, 0x14(r1)
/* 800A24B4 0009F414  93 81 00 10 */	stw r28, 0x10(r1)
/* 800A24B8 0009F418  81 03 00 08 */	lwz r8, 8(r3)
/* 800A24BC 0009F41C  38 60 00 00 */	li r3, 0
/* 800A24C0 0009F420  28 08 00 00 */	cmplwi r8, 0
/* 800A24C4 0009F424  40 81 00 BC */	ble lbl_800A2580
/* 800A24C8 0009F428  28 08 00 08 */	cmplwi r8, 8
/* 800A24CC 0009F42C  38 88 FF F8 */	addi r4, r8, -8
/* 800A24D0 0009F430  40 81 00 88 */	ble lbl_800A2558
/* 800A24D4 0009F434  38 04 00 07 */	addi r0, r4, 7
/* 800A24D8 0009F438  54 00 E8 FE */	srwi r0, r0, 3
/* 800A24DC 0009F43C  7C 09 03 A6 */	mtctr r0
/* 800A24E0 0009F440  28 04 00 00 */	cmplwi r4, 0
/* 800A24E4 0009F444  40 81 00 74 */	ble lbl_800A2558
lbl_800A24E8:
/* 800A24E8 0009F448  39 23 00 10 */	addi r9, r3, 0x10
/* 800A24EC 0009F44C  38 63 00 08 */	addi r3, r3, 8
/* 800A24F0 0009F450  7D 3F 4A 14 */	add r9, r31, r9
/* 800A24F4 0009F454  88 09 00 00 */	lbz r0, 0(r9)
/* 800A24F8 0009F458  88 89 00 01 */	lbz r4, 1(r9)
/* 800A24FC 0009F45C  7C A5 02 14 */	add r5, r5, r0
/* 800A2500 0009F460  88 09 00 02 */	lbz r0, 2(r9)
/* 800A2504 0009F464  54 A5 06 3E */	clrlwi r5, r5, 0x18
/* 800A2508 0009F468  88 E9 00 03 */	lbz r7, 3(r9)
/* 800A250C 0009F46C  7C 85 22 14 */	add r4, r5, r4
/* 800A2510 0009F470  88 C9 00 04 */	lbz r6, 4(r9)
/* 800A2514 0009F474  54 84 06 3E */	clrlwi r4, r4, 0x18
/* 800A2518 0009F478  88 A9 00 05 */	lbz r5, 5(r9)
/* 800A251C 0009F47C  7C 04 02 14 */	add r0, r4, r0
/* 800A2520 0009F480  88 89 00 06 */	lbz r4, 6(r9)
/* 800A2524 0009F484  54 0A 06 3E */	clrlwi r10, r0, 0x18
/* 800A2528 0009F488  88 09 00 07 */	lbz r0, 7(r9)
/* 800A252C 0009F48C  7C EA 3A 14 */	add r7, r10, r7
/* 800A2530 0009F490  54 E7 06 3E */	clrlwi r7, r7, 0x18
/* 800A2534 0009F494  7C C7 32 14 */	add r6, r7, r6
/* 800A2538 0009F498  54 C6 06 3E */	clrlwi r6, r6, 0x18
/* 800A253C 0009F49C  7C A6 2A 14 */	add r5, r6, r5
/* 800A2540 0009F4A0  54 A5 06 3E */	clrlwi r5, r5, 0x18
/* 800A2544 0009F4A4  7C 85 22 14 */	add r4, r5, r4
/* 800A2548 0009F4A8  54 84 06 3E */	clrlwi r4, r4, 0x18
/* 800A254C 0009F4AC  7C 04 02 14 */	add r0, r4, r0
/* 800A2550 0009F4B0  54 05 06 3E */	clrlwi r5, r0, 0x18
/* 800A2554 0009F4B4  42 00 FF 94 */	bdnz lbl_800A24E8
lbl_800A2558:
/* 800A2558 0009F4B8  7C 03 40 50 */	subf r0, r3, r8
/* 800A255C 0009F4BC  7C 09 03 A6 */	mtctr r0
/* 800A2560 0009F4C0  7C 03 40 40 */	cmplw r3, r8
/* 800A2564 0009F4C4  40 80 00 1C */	bge lbl_800A2580
lbl_800A2568:
/* 800A2568 0009F4C8  38 03 00 10 */	addi r0, r3, 0x10
/* 800A256C 0009F4CC  38 63 00 01 */	addi r3, r3, 1
/* 800A2570 0009F4D0  7C 1F 00 AE */	lbzx r0, r31, r0
/* 800A2574 0009F4D4  7C 05 02 14 */	add r0, r5, r0
/* 800A2578 0009F4D8  54 05 06 3E */	clrlwi r5, r0, 0x18
/* 800A257C 0009F4DC  42 00 FF EC */	bdnz lbl_800A2568
lbl_800A2580:
/* 800A2580 0009F4E0  68 A0 00 FF */	xori r0, r5, 0xff
/* 800A2584 0009F4E4  38 60 00 7E */	li r3, 0x7e
/* 800A2588 0009F4E8  54 1E 06 3E */	clrlwi r30, r0, 0x18
/* 800A258C 0009F4EC  48 00 62 C1 */	bl WriteUART1
/* 800A2590 0009F4F0  2C 03 00 00 */	cmpwi r3, 0
/* 800A2594 0009F4F4  40 82 00 5C */	bne lbl_800A25F0
/* 800A2598 0009F4F8  3B A0 00 00 */	li r29, 0
/* 800A259C 0009F4FC  48 00 00 48 */	b lbl_800A25E4
lbl_800A25A0:
/* 800A25A0 0009F500  38 1D 00 10 */	addi r0, r29, 0x10
/* 800A25A4 0009F504  7F 9F 00 AE */	lbzx r28, r31, r0
/* 800A25A8 0009F508  28 1C 00 7E */	cmplwi r28, 0x7e
/* 800A25AC 0009F50C  41 82 00 0C */	beq lbl_800A25B8
/* 800A25B0 0009F510  28 1C 00 7D */	cmplwi r28, 0x7d
/* 800A25B4 0009F514  40 82 00 1C */	bne lbl_800A25D0
lbl_800A25B8:
/* 800A25B8 0009F518  38 60 00 7D */	li r3, 0x7d
/* 800A25BC 0009F51C  48 00 62 91 */	bl WriteUART1
/* 800A25C0 0009F520  2C 03 00 00 */	cmpwi r3, 0
/* 800A25C4 0009F524  6B 80 00 20 */	xori r0, r28, 0x20
/* 800A25C8 0009F528  54 1C 06 3E */	clrlwi r28, r0, 0x18
/* 800A25CC 0009F52C  40 82 00 24 */	bne lbl_800A25F0
lbl_800A25D0:
/* 800A25D0 0009F530  7F 83 07 74 */	extsb r3, r28
/* 800A25D4 0009F534  48 00 62 79 */	bl WriteUART1
/* 800A25D8 0009F538  2C 03 00 00 */	cmpwi r3, 0
/* 800A25DC 0009F53C  40 82 00 14 */	bne lbl_800A25F0
/* 800A25E0 0009F540  3B BD 00 01 */	addi r29, r29, 1
lbl_800A25E4:
/* 800A25E4 0009F544  80 1F 00 08 */	lwz r0, 8(r31)
/* 800A25E8 0009F548  7C 1D 00 40 */	cmplw r29, r0
/* 800A25EC 0009F54C  41 80 FF B4 */	blt lbl_800A25A0
lbl_800A25F0:
/* 800A25F0 0009F550  2C 03 00 00 */	cmpwi r3, 0
/* 800A25F4 0009F554  40 82 00 40 */	bne lbl_800A2634
/* 800A25F8 0009F558  57 C0 06 3E */	clrlwi r0, r30, 0x18
/* 800A25FC 0009F55C  7F DC F3 78 */	mr r28, r30
/* 800A2600 0009F560  28 00 00 7E */	cmplwi r0, 0x7e
/* 800A2604 0009F564  41 82 00 0C */	beq lbl_800A2610
/* 800A2608 0009F568  28 00 00 7D */	cmplwi r0, 0x7d
/* 800A260C 0009F56C  40 82 00 1C */	bne lbl_800A2628
lbl_800A2610:
/* 800A2610 0009F570  38 60 00 7D */	li r3, 0x7d
/* 800A2614 0009F574  48 00 62 39 */	bl WriteUART1
/* 800A2618 0009F578  2C 03 00 00 */	cmpwi r3, 0
/* 800A261C 0009F57C  6B 80 00 20 */	xori r0, r28, 0x20
/* 800A2620 0009F580  54 1C 06 3E */	clrlwi r28, r0, 0x18
/* 800A2624 0009F584  40 82 00 10 */	bne lbl_800A2634
lbl_800A2628:
/* 800A2628 0009F588  7F 83 07 74 */	extsb r3, r28
/* 800A262C 0009F58C  48 00 62 21 */	bl WriteUART1
/* 800A2630 0009F590  2C 03 00 00 */	cmpwi r3, 0
lbl_800A2634:
/* 800A2634 0009F594  2C 03 00 00 */	cmpwi r3, 0
/* 800A2638 0009F598  40 82 00 0C */	bne lbl_800A2644
/* 800A263C 0009F59C  38 60 00 7E */	li r3, 0x7e
/* 800A2640 0009F5A0  48 00 62 0D */	bl WriteUART1
lbl_800A2644:
/* 800A2644 0009F5A4  2C 03 00 00 */	cmpwi r3, 0
/* 800A2648 0009F5A8  40 82 00 08 */	bne lbl_800A2650
/* 800A264C 0009F5AC  48 00 62 29 */	bl WriteUARTFlush
lbl_800A2650:
/* 800A2650 0009F5B0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 800A2654 0009F5B4  83 E1 00 1C */	lwz r31, 0x1c(r1)
/* 800A2658 0009F5B8  83 C1 00 18 */	lwz r30, 0x18(r1)
/* 800A265C 0009F5BC  83 A1 00 14 */	lwz r29, 0x14(r1)
/* 800A2660 0009F5C0  83 81 00 10 */	lwz r28, 0x10(r1)
/* 800A2664 0009F5C4  7C 08 03 A6 */	mtlr r0
/* 800A2668 0009F5C8  38 21 00 20 */	addi r1, r1, 0x20
/* 800A266C 0009F5CC  4E 80 00 20 */	blr 
